<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>B/S架构与HTTP协议及其简单应用 | SteamedFish&#39;s Blog</title>
<meta name="keywords" content="B-S架构, HTTP协议">
<meta name="description" content="B/S架构
什么是B/S架构？
B/S架构 ，全称Browser/Server 架构
是指用户只需使用Web浏览器（Browser）作为客户端，通过网络访问服务器端（Server）上部署的应用程序即可使用系统功能。  
常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。">
<meta name="author" content="">
<link rel="canonical" href="https://www.steamedfish.top/post/b-s/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.cab4f9d994f2a3255820d3e121c622d3d605f1bd1c99b2830f4fd817aa7dc924.css" integrity="sha256-yrT52ZTyoyVYINPhIcYi09YF8b0cmbKDD0/YF6p9ySQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.steamedfish.top/favicon.png">
<link rel="apple-touch-icon" href="https://www.steamedfish.top/favicon.png">
<link rel="mask-icon" href="https://www.steamedfish.top/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://www.steamedfish.top/post/b-s/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<link
  href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css"
  rel="stylesheet"
/>
<meta property="og:url" content="https://www.steamedfish.top/post/b-s/">
  <meta property="og:site_name" content="SteamedFish&#39;s Blog">
  <meta property="og:title" content="B/S架构与HTTP协议及其简单应用">
  <meta property="og:description" content="B/S架构 什么是B/S架构？ B/S架构 ，全称Browser/Server 架构
是指用户只需使用Web浏览器（Browser）作为客户端，通过网络访问服务器端（Server）上部署的应用程序即可使用系统功能。 常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-11-05T08:45:35+00:00">
    <meta property="article:modified_time" content="2025-11-28T17:12:55+00:00">
    <meta property="article:tag" content="B-S架构">
    <meta property="article:tag" content="HTTP协议">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="B/S架构与HTTP协议及其简单应用">
<meta name="twitter:description" content="B/S架构
什么是B/S架构？
B/S架构 ，全称Browser/Server 架构
是指用户只需使用Web浏览器（Browser）作为客户端，通过网络访问服务器端（Server）上部署的应用程序即可使用系统功能。  
常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.steamedfish.top/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "B/S架构与HTTP协议及其简单应用",
      "item": "https://www.steamedfish.top/post/b-s/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "B/S架构与HTTP协议及其简单应用",
  "name": "B\/S架构与HTTP协议及其简单应用",
  "description": "B/S架构 什么是B/S架构？ B/S架构 ，全称Browser/Server 架构\n是指用户只需使用Web浏览器（Browser）作为客户端，通过网络访问服务器端（Server）上部署的应用程序即可使用系统功能。 常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。\n",
  "keywords": [
    "B-S架构", "HTTP协议"
  ],
  "articleBody": "B/S架构 什么是B/S架构？ B/S架构 ，全称Browser/Server 架构\n是指用户只需使用Web浏览器（Browser）作为客户端，通过网络访问服务器端（Server）上部署的应用程序即可使用系统功能。 常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。\n结构（常见设计方式） B/S架构通常分为三层：\n层次\r说明\r举例\r表示层（前端）\r用户界面，用于与用户交互\rHTML、CSS、JavaScript\r业务逻辑层（中间层）\r实现系统功能逻辑\rFlask、Spring Boot、Django 等\r数据层（后端数据库）\r负责数据存储与管理\rMySQL、Oracle、SQLite 等\r工作原理 用户打开浏览器，输入网址（或点击链接）\n浏览器向服务器发送请求（HTTP/HTTPS 协议）\n服务器处理请求（例如访问数据库、执行逻辑），然后返回网页内容（HTML、CSS、JS等）\n浏览器解析这些内容并显示给用户\n用户操作后再向服务器发送新的请求，重复上述过程\nB/S架构的优点 无需安装客户端 只要有浏览器即可使用； 易于维护与升级 服务器更新后，所有用户自动使用最新版本； 跨平台性强 支持 Windows、Mac、手机等多种终端访问； 开发效率高 可使用成熟的Web框架快速开发。 HTTP协议 什么是HTTP协议？ HTTP（HyperText Transfer Protocol，超文本传输协议） 是 B/S 架构中浏览器与服务器之间进行通信的基础协议。 它定义了客户端与服务器之间请求与响应的格式和流程。\nHTTP 属于 无状态协议，即每次请求都是独立的，服务器不会自动保存上一次交互的状态（可以用 Cookie、Session 来实现状态保持）。\nHTTP工作原理 二、HTTP工作原理\nHTTP 通信是基于请求–响应模型（Request–Response Model） 的：\n客户端（浏览器）向服务器发送请求（Request）；\n服务器收到请求后处理，并返回响应（Response）；\n浏览器根据响应结果显示内容。\n简要流程：\n用户输入网址 → 浏览器发送HTTP请求 → 服务器处理并返回响应 → 浏览器显示网页 例如：\nGET /index.html HTTP/1.1 Host: www.example.com 服务器响应：\nHTTP/1.1 200 OK Content-Type: text/html ... HTTP请求报文格式 HTTP请求（Request）由三部分组成：\n请求行 请求头 请求体（可选） 1.请求行 格式：\n请求方法 请求URL 协议版本 实例：\nGET /login HTTP/1.1 常见的请求方法 方法\r说明\rGET\r获取资源（最常用）\rPOST\r提交数据（如登录表单）\rPUT\r更新数据\rDELETE\r删除资源\rHEAD\r获取报文头信息\rOPTIONS\r获取服务器支持的HTTP方法\r请求方式-GET： 请求参数在请求行中，没有请求体，如：/brand/findALL?name=OPPO\u0026status=1。GET请求大小在浏览器中是有限制的。 请求方式-POST：\n请求参数在请求体中，POST请求大小是没有限制的。 2.请求头（Header） 包含客户端的环境信息、数据格式、认证信息等。 示例：\nHost: www.example.com User-Agent: Chrome/118.0 Accept: text/html Content-Type: application/x-www-form-urlencoded HTTP-请求头数据格式 Key\rValue\rHost\r请求的主机名\rUser-Agent\r浏览器版本，例如Chrome浏览器的标识类似Mozilla/5.0...Chrome/79，IE浏览器的标识类似Mozilla/5.0（Windows NT...）like Gecko\rAccept\r表示浏览器能接收的资源类型，如text/*，image/*或者*/*表示所有；\rAccept-Language\r表示浏览器偏好的语言，服务器可以据此返回不同语言的网页；\rAccept-Encoding\r表示浏览器可以支持的压缩类型，例如gzip，deflate等。\rContent-Type\r请求主体的数据类型。\rContent-Length\r请求主体的大小（单位：字节）。\r3. 请求体（Body） 用于在 POST / GET 请求中传输数据，例如表单信息：\nusername=lucian\u0026password=123456 HTTP响应报文格式 HTTP响应（Response）同样由三部分组成：\n状态行 响应头 响应体 1. 状态行 格式：\n协议版本 状态码 状态描述 示例：\nHTTP/1.1 200 OK 常见状态码分类：\n状态码\r类型\r说明\r1xx\r信息\r请求已接收，继续处理\r2xx\r成功\r请求成功（200 OK）\r3xx\r重定向\r需要进一步操作（302）\r4xx\r客户端错误\r请求错误（404 Not Found）\r5xx\r服务器错误\r服务器故障（500 Internal Server Error）\r2. 响应头 包含返回数据的类型、长度、缓存等信息。 示例：\nContent-Type: text/html; charset=UTF-8 Content-Length: 1024 Server: nginx/1.24 3. 响应体 即真正返回给浏览器显示的内容，例如 HTML 页面：\n欢迎访问 HTTP版本的演变 版本\r特点\rHTTP/1.0\r短连接，每次请求都需建立新连接\rHTTP/1.1\r默认持久连接（Keep-Alive），支持管线化\rHTTP/2\r多路复用、二进制传输、头部压缩\rHTTP/3\r基于 QUIC 协议，更快更安全（UDP）\r基于B/S架构与HTTP协议的简单应用 创建ServerDemo模拟服务端分配任务给子线程\npackage com.itheima.d7_tcp4; import java.net.ServerSocket; import java.net.Socket; public class ServerDemo { public static void main(String[] args) throws Exception { //目标：实现TCP下多收多发：服务端 System.out.println(\"=====服务端启动=====\"); //1.创建服务端ServerSocket对象，绑定端口号，监听客户端连接 ServerSocket ss =new ServerSocket(8080); while (true) { //2.调用accept()方法，阻塞等待客户端连接，连接成功返回一个Socket对象 Socket socket =ss.accept(); System.out.println(\"一个客户端上线了：\"+socket.getInetAddress().getHostAddress()); //3.把这个客户端客户端交给一个独立的子线程专门负责接受这个管道的消息 new ServerReader(socket).start(); } } } 创建子线程ServerReader输出数据给web端\npackage com.itheima.d7_tcp4; import java.io.OutputStream; import java.io.PrintStream; import java.net.Socket; public class ServerReader extends Thread { private Socket socket; public ServerReader(Socket socket) { this.socket = socket; } @Override public void run() { try { //给当前对应的浏览器管道响应一个网页数据回去 OutputStream os = socket.getOutputStream(); //通过字节输出流包装写出去的数据给浏览器 //把字节输出流包装成打印流（自带换行） PrintStream ps = new PrintStream(os); //写相应的网页数据回去 ps.println(\"HTTP/1.1 200 OK\"); ps.println(\"Content-Type:text/html;charset=utf-8\"); ps.println();//换行输出响应体 ps.println(\"\"); ps.println(\"\"); ps.println(\"\"); ps.println(\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eps\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Java\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eps\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\"); ps.println(\"\"); ps.println(\"\"); ps.println(\"万事万物皆对象\"); ps.println(\"\"); ps.println(\"\"); ps.close(); //浏览器一般为短连接，所以关闭接口 socket.close(); } catch (Exception e) { System.out.println(\"客户端下线了：\" + socket.getInetAddress().getHostAddress()); } } } 用浏览器访问localhost:8080可以看到页面访问成功，title和body也如预想般正常显示 至此一个基于B/S架构与HTTP协议的简单应用就做好了\n接下来我们试着来对它进行一些优化 在之前的程序中，每次收到web端的HTTP请求时，程序都会创建一个线程来响应。\n当我们遇到大量请求时，就需要频繁的创建、销毁线程 我们可以用线程池来解决这个问题\n优点\r说明\r1. 提高性能\r避免频繁创建和销毁线程，减少系统开销。\r2. 控制并发量\r限制最大线程数，防止服务器被大量请求压垮。\r3. 提升响应速度\r请求到来时可立即分配空闲线程，响应更快。\r4. 资源利用率高\r空闲线程可被重复利用，不浪费系统资源。\r5. 便于管理\r可根据系统负载动态调整线程数（如Java的ThreadPoolExecutor）。\rServerReader.java:\npackage com.itheima.d7_tcp4; import java.io.OutputStream; import java.io.PrintStream; import java.net.Socket; public class ServerReader implements Runnable { private Socket socket; public ServerReader(Socket socket) { this.socket = socket; } @Override public void run() { try { //给当前对应的浏览器管道响应一个网页数据回去 OutputStream os = socket.getOutputStream(); //通过字节输出流包装写出去的数据给浏览器 //把字节输出流包装成打印流（自带换行） PrintStream ps = new PrintStream(os); //写相应的网页数据回去 ps.println(\"HTTP/1.1 200 OK\"); ps.println(\"Content-Type:text/html;charset=utf-8\"); ps.println();//换行输出响应体 ps.println(\"\"); ps.println(\"\"); ps.println(\"\"); ps.println(\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eps\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Java\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eps\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\"); ps.println(\"\"); ps.println(\"\"); ps.println(\"万事万物皆对象\"); ps.println(\"\"); ps.println(\"\"); ps.close(); //浏览器一般为短连接，所以关闭接口 socket.close(); } catch (Exception e) { System.out.println(\"客户端下线了：\" + socket.getInetAddress().getHostAddress()); } } } ServerDemo.java:\npackage com.itheima.d7_tcp4; import java.net.ServerSocket; import java.net.Socket; import java.util.concurrent.*; public class ServerDemo { public static void main(String[] args) throws Exception { //目标：实现TCP下多收多发：服务端 System.out.println(\"=====服务端启动=====\"); //1.创建服务端ServerSocket对象，绑定端口号，监听客户端连接 ServerSocket ss =new ServerSocket(8080); //创建线程池 ExecutorService pool =new ThreadPoolExecutor(3,10,10, TimeUnit.SECONDS ,new ArrayBlockingQueue\u003c\u003e(100), Executors.defaultThreadFactory(),new ThreadPoolExecutor.AbortPolicy()); while (true) { //2.调用accept()方法，阻塞等待客户端连接，连接成功返回一个Socket对象 Socket socket =ss.accept(); System.out.println(\"一个客户端上线了：\"+socket.getInetAddress().getHostAddress()); //3.把这个客户端交给线程池处理 pool.execute(new ServerReader(socket)); //有客户端连接，将其包装成socket对象，new一个ServerReader处理，然后线程池分配一个的空闲线程来执行该任务 } } } ",
  "wordCount" : "3432",
  "inLanguage": "zh",
  "datePublished": "2025-11-05T08:45:35.193Z",
  "dateModified": "2025-11-28T17:12:55.186301395Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.steamedfish.top/post/b-s/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SteamedFish's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.steamedfish.top/favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.steamedfish.top/" accesskey="h" title="SteamedFish&#39;s Blog (Alt + H)">SteamedFish&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                    <ul class="lang-switch"><li>|</li>
                        <li>
                            <a href="https://www.steamedfish.top/en/" title="English"
                                aria-label="English">En</a>
                        </li>
                    </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.steamedfish.top/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.steamedfish.top/">主页</a>&nbsp;»&nbsp;<a href="https://www.steamedfish.top/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      B/S架构与HTTP协议及其简单应用
    </h1>
    <div class="post-meta">






<span title='2025-11-05 08:45:35.193 +0000 UTC'>2025-11-05</span>&nbsp;·&nbsp;<span title='2025-11-28 17:12:55.186301395 +0000 UTC'>(最后修改于 2025-11-28)</span>&nbsp;·&nbsp;<span>7 分钟</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#bs%e6%9e%b6%e6%9e%84" aria-label="B/S架构">B/S架构</a><ul>
                        
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%afbs%e6%9e%b6%e6%9e%84" aria-label="什么是B/S架构？">什么是B/S架构？</a></li>
                <li>
                    <a href="#%e7%bb%93%e6%9e%84%e5%b8%b8%e8%a7%81%e8%ae%be%e8%ae%a1%e6%96%b9%e5%bc%8f" aria-label="结构（常见设计方式）">结构（常见设计方式）</a></li>
                <li>
                    <a href="#%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86" aria-label="工作原理">工作原理</a></li>
                <li>
                    <a href="#bs%e6%9e%b6%e6%9e%84%e7%9a%84%e4%bc%98%e7%82%b9" aria-label="B/S架构的优点">B/S架构的优点</a></li></ul>
                </li>
                <li>
                    <a href="#http%e5%8d%8f%e8%ae%ae" aria-label="HTTP协议">HTTP协议</a><ul>
                        
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%afhttp%e5%8d%8f%e8%ae%ae" aria-label="什么是HTTP协议？">什么是HTTP协议？</a></li>
                <li>
                    <a href="#http%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86" aria-label="HTTP工作原理">HTTP工作原理</a></li>
                <li>
                    <a href="#http%e8%af%b7%e6%b1%82%e6%8a%a5%e6%96%87%e6%a0%bc%e5%bc%8f" aria-label="HTTP请求报文格式">HTTP请求报文格式</a><ul>
                        
                <li>
                    <a href="#1%e8%af%b7%e6%b1%82%e8%a1%8c" aria-label="1.请求行">1.请求行</a><ul>
                        
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e7%9a%84%e8%af%b7%e6%b1%82%e6%96%b9%e6%b3%95" aria-label="常见的请求方法">常见的请求方法</a></li></ul>
                </li>
                <li>
                    <a href="#2%e8%af%b7%e6%b1%82%e5%a4%b4header" aria-label="2.请求头（Header）">2.请求头（Header）</a><ul>
                        
                <li>
                    <a href="#http-%e8%af%b7%e6%b1%82%e5%a4%b4%e6%95%b0%e6%8d%ae%e6%a0%bc%e5%bc%8f" aria-label="HTTP-请求头数据格式">HTTP-请求头数据格式</a></li></ul>
                </li>
                <li>
                    <a href="#3-%e8%af%b7%e6%b1%82%e4%bd%93body" aria-label="3. 请求体（Body）">3. 请求体（Body）</a></li></ul>
                </li>
                <li>
                    <a href="#http%e5%93%8d%e5%ba%94%e6%8a%a5%e6%96%87%e6%a0%bc%e5%bc%8f" aria-label="HTTP响应报文格式">HTTP响应报文格式</a><ul>
                        
                <li>
                    <a href="#1-%e7%8a%b6%e6%80%81%e8%a1%8c" aria-label="1. 状态行">1. 状态行</a></li>
                <li>
                    <a href="#2-%e5%93%8d%e5%ba%94%e5%a4%b4" aria-label="2. 响应头">2. 响应头</a></li>
                <li>
                    <a href="#3-%e5%93%8d%e5%ba%94%e4%bd%93" aria-label="3. 响应体">3. 响应体</a></li></ul>
                </li>
                <li>
                    <a href="#http%e7%89%88%e6%9c%ac%e7%9a%84%e6%bc%94%e5%8f%98" aria-label="HTTP版本的演变">HTTP版本的演变</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8ebs%e6%9e%b6%e6%9e%84%e4%b8%8ehttp%e5%8d%8f%e8%ae%ae%e7%9a%84%e7%ae%80%e5%8d%95%e5%ba%94%e7%94%a8" aria-label="基于B/S架构与HTTP协议的简单应用">基于B/S架构与HTTP协议的简单应用</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="bs架构">B/S架构<a hidden class="anchor" aria-hidden="true" href="#bs架构">#</a></h1>
<h2 id="什么是bs架构">什么是B/S架构？<a hidden class="anchor" aria-hidden="true" href="#什么是bs架构">#</a></h2>
<p><strong>B/S架构</strong> ，全称<strong>Browser/Server 架构</strong></p>
<p>是指用户只需使用<strong>Web浏览器</strong>（Browser）作为<strong>客户端</strong>，通过网络访问<strong>服务器端</strong>（Server）上部署的应用程序即可使用系统功能。  <br>
常见示例：网页端系统，如校园外卖系统、教务系统、网上银行、微信网页版等。</p>
<hr>
<h2 id="结构常见设计方式">结构（常见设计方式）<a hidden class="anchor" aria-hidden="true" href="#结构常见设计方式">#</a></h2>
<p>B/S架构通常分为三层：</p>




<table>

    <thead>
      <tr>
          <th>层次</th>
          <th>说明</th>
          <th>举例</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">表示层（前端）</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">用户界面，用于与用户交互</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">HTML、CSS、JavaScript</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">业务逻辑层（中间层）</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">实现系统功能逻辑</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">Flask、Spring Boot、Django 等</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">数据层（后端数据库）</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">负责数据存储与管理</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">MySQL、Oracle、SQLite 等</td>
      </tr>
  </tbody>
</table><hr>
<h2 id="工作原理">工作原理<a hidden class="anchor" aria-hidden="true" href="#工作原理">#</a></h2>
<ol>
<li>
<p>用户打开浏览器，输入网址（或点击链接）</p>
</li>
<li>
<p>浏览器向服务器发送请求（HTTP/HTTPS 协议）</p>
</li>
<li>
<p>服务器处理请求（例如访问数据库、执行逻辑），然后返回网页内容（HTML、CSS、JS等）</p>
</li>
<li>
<p>浏览器解析这些内容并显示给用户</p>
</li>
<li>
<p>用户操作后再向服务器发送新的请求，重复上述过程</p>
</li>
</ol>
<hr>
<h2 id="bs架构的优点">B/S架构的优点<a hidden class="anchor" aria-hidden="true" href="#bs架构的优点">#</a></h2>
<ul>
<li><strong>无需安装客户端</strong> <br>
只要有浏览器即可使用；</li>
<li><strong>易于维护与升级</strong> <br>
服务器更新后，所有用户自动使用最新版本；</li>
<li><strong>跨平台性强</strong> <br>
支持 Windows、Mac、手机等多种终端访问；</li>
<li><strong>开发效率高</strong> <br>
可使用成熟的Web框架快速开发。</li>
</ul>
<hr>
<h1 id="http协议">HTTP协议<a hidden class="anchor" aria-hidden="true" href="#http协议">#</a></h1>
<h2 id="什么是http协议">什么是HTTP协议？<a hidden class="anchor" aria-hidden="true" href="#什么是http协议">#</a></h2>
<p><strong>HTTP（HyperText Transfer Protocol，超文本传输协议）</strong> 是 B/S 架构中浏览器与服务器之间进行通信的基础协议。  <br>
它定义了客户端与服务器之间<strong>请求与响应的格式和流程</strong>。</p>
<p>HTTP 属于 <strong>无状态协议</strong>，即每次请求都是独立的，服务器不会自动保存上一次交互的状态（可以用 Cookie、Session 来实现状态保持）。</p>
<hr>
<h2 id="http工作原理">HTTP工作原理<a hidden class="anchor" aria-hidden="true" href="#http工作原理">#</a></h2>
<p>二、HTTP工作原理</p>
<p>HTTP 通信是基于<strong>请求–响应模型（Request–Response Model）</strong> 的：</p>
<ol>
<li>
<p>客户端（浏览器）向服务器发送请求（Request）；</p>
</li>
<li>
<p>服务器收到请求后处理，并返回响应（Response）；</p>
</li>
<li>
<p>浏览器根据响应结果显示内容。</p>
</li>
</ol>
<p>简要流程：</p>
<pre tabindex="0"><code>用户输入网址 → 浏览器发送HTTP请求 → 服务器处理并返回响应 → 浏览器显示网页
</code></pre><p>例如：</p>
<pre tabindex="0"><code>GET /index.html HTTP/1.1
Host: www.example.com
</code></pre><p>服务器响应：</p>
<pre tabindex="0"><code>HTTP/1.1 200 OK
Content-Type: text/html
&lt;html&gt;...&lt;/html&gt;
</code></pre><h2 id="http请求报文格式">HTTP请求报文格式<a hidden class="anchor" aria-hidden="true" href="#http请求报文格式">#</a></h2>
<p>HTTP请求（Request）由三部分组成：</p>
<pre tabindex="0"><code>请求行
请求头
请求体（可选）
</code></pre><h3 id="1请求行">1.请求行<a hidden class="anchor" aria-hidden="true" href="#1请求行">#</a></h3>
<p>格式：</p>
<pre tabindex="0"><code>请求方法 请求URL 协议版本
</code></pre><p>实例：</p>
<pre tabindex="0"><code>GET /login HTTP/1.1
</code></pre><h4 id="常见的请求方法">常见的请求方法<a hidden class="anchor" aria-hidden="true" href="#常见的请求方法">#</a></h4>




<table>

    <thead>
      <tr>
          <th>方法</th>
          <th>说明</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>GET</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">获取资源（最常用）</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>POST</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">提交数据（如登录表单）</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>PUT</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">更新数据</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>DELETE</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">删除资源</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>HEAD</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">获取报文头信息</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>OPTIONS</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">获取服务器支持的HTTP方法</td>
      </tr>
  </tbody>
</table><ul>
<li>请求方式-GET： <br>
请求参数在请求行中，没有请求体，如：<code>/brand/findALL?name=OPPO&amp;status=1</code>。GET请求大小在浏览器中是有限制的。</li>
<li>请求方式-POST：<br>
请求参数在请求体中，POST请求大小是没有限制的。</li>
</ul>
<hr>
<h3 id="2请求头header">2.请求头（Header）<a hidden class="anchor" aria-hidden="true" href="#2请求头header">#</a></h3>
<p>包含客户端的环境信息、数据格式、认证信息等。
示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">Host: www.example.com
</span></span><span class="line"><span class="cl">User-Agent: Chrome/118.0
</span></span><span class="line"><span class="cl">Accept: text/html
</span></span><span class="line"><span class="cl">Content-Type: application/x-www-form-urlencoded
</span></span></code></pre></div><hr>
<h4 id="http-请求头数据格式">HTTP-请求头数据格式<a hidden class="anchor" aria-hidden="true" href="#http-请求头数据格式">#</a></h4>




<table>

    <thead>
      <tr>
          <th style="text-align: center">Key</th>
          <th style="text-align: center">Value</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Host</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">请求的主机名</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">User-Agent</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">浏览器版本，例如Chrome浏览器的标识类似<code>Mozilla/5.0...Chrome/79</code>，IE浏览器的标识类似<code>Mozilla/5.0（Windows NT...）like Gecko</code></td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Accept</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">表示浏览器能接收的资源类型，如<code>text/*</code>，<code>image/*</code>或者<code>*/*</code>表示所有；</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Accept-Language</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">表示浏览器偏好的语言，服务器可以据此返回不同语言的网页；</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Accept-Encoding</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">表示浏览器可以支持的压缩类型，例如gzip，deflate等。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Content-Type</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">请求主体的数据类型。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">Content-Length</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: center">请求主体的大小（单位：字节）。</td>
      </tr>
  </tbody>
</table><hr>
<h3 id="3-请求体body">3. 请求体（Body）<a hidden class="anchor" aria-hidden="true" href="#3-请求体body">#</a></h3>
<p>用于在 <strong>POST / GET</strong> 请求中传输数据，例如表单信息：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">username=lucian<span class="err">&amp;</span>password=123456
</span></span></code></pre></div><hr>
<h2 id="http响应报文格式">HTTP响应报文格式<a hidden class="anchor" aria-hidden="true" href="#http响应报文格式">#</a></h2>
<p>HTTP响应（Response）同样由三部分组成：</p>
<pre tabindex="0"><code>状态行
响应头
响应体
</code></pre><hr>
<h3 id="1-状态行">1. 状态行<a hidden class="anchor" aria-hidden="true" href="#1-状态行">#</a></h3>
<p>格式：</p>
<pre tabindex="0"><code>协议版本 状态码 状态描述
</code></pre><p>示例：</p>
<pre tabindex="0"><code>HTTP/1.1 200 OK
</code></pre><p>常见状态码分类：</p>




<table>

    <thead>
      <tr>
          <th>状态码</th>
          <th>类型</th>
          <th>说明</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>1xx</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">信息</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">请求已接收，继续处理</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>2xx</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">成功</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">请求成功（200 OK）</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>3xx</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">重定向</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">需要进一步操作（302）</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>4xx</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">客户端错误</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">请求错误（404 Not Found）</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>5xx</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">服务器错误</td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">服务器故障（500 Internal Server Error）</td>
      </tr>
  </tbody>
</table><hr>
<h3 id="2-响应头">2. 响应头<a hidden class="anchor" aria-hidden="true" href="#2-响应头">#</a></h3>
<p>包含返回数据的类型、长度、缓存等信息。   <br>
示例：</p>
<pre tabindex="0"><code>Content-Type: text/html; charset=UTF-8
Content-Length: 1024
Server: nginx/1.24
</code></pre><hr>
<h3 id="3-响应体">3. 响应体<a hidden class="anchor" aria-hidden="true" href="#3-响应体">#</a></h3>
<p>即真正返回给浏览器显示的内容，例如 HTML 页面：</p>
<pre tabindex="0"><code>
&lt;html&gt;
  &lt;body&gt;&lt;h1&gt;欢迎访问&lt;/h1&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id="http版本的演变">HTTP版本的演变<a hidden class="anchor" aria-hidden="true" href="#http版本的演变">#</a></h2>




<table>

    <thead>
      <tr>
          <th>版本</th>
          <th>特点</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>HTTP/1.0</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">短连接，每次请求都需建立新连接</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>HTTP/1.1</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">默认持久连接（Keep-Alive），支持管线化</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>HTTP/2</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">多路复用、二进制传输、头部压缩</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>HTTP/3</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">基于 QUIC 协议，更快更安全（UDP）</td>
      </tr>
  </tbody>
</table><h2 id="基于bs架构与http协议的简单应用">基于B/S架构与HTTP协议的简单应用<a hidden class="anchor" aria-hidden="true" href="#基于bs架构与http协议的简单应用">#</a></h2>
<p>创建ServerDemo模拟服务端分配任务给子线程</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.d7_tcp4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.ServerSocket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.Socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//目标：实现TCP下多收多发：服务端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====服务端启动=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.创建服务端ServerSocket对象，绑定端口号，监听客户端连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ServerSocket</span><span class="w"> </span><span class="n">ss</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ServerSocket</span><span class="p">(</span><span class="n">8080</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//2.调用accept()方法，阻塞等待客户端连接，连接成功返回一个Socket对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="n">ss</span><span class="p">.</span><span class="na">accept</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;一个客户端上线了：&#34;</span><span class="o">+</span><span class="n">socket</span><span class="p">.</span><span class="na">getInetAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//3.把这个客户端客户端交给一个独立的子线程专门负责接受这个管道的消息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">ServerReader</span><span class="p">(</span><span class="n">socket</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>创建子线程ServerReader输出数据给web端</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.d7_tcp4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.OutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.PrintStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.Socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerReader</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ServerReader</span><span class="p">(</span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//给当前对应的浏览器管道响应一个网页数据回去</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">socket</span><span class="p">.</span><span class="na">getOutputStream</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//通过字节输出流包装写出去的数据给浏览器</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//把字节输出流包装成打印流（自带换行）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">PrintStream</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="n">os</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//写相应的网页数据回去</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;HTTP/1.1 200 OK&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Content-Type:text/html;charset=utf-8&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="c1">//换行输出响应体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;html&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;head&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;meta charset=&#39;utf-8&#39;&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;title&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Java&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/title&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/head&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;body&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;h1 style=&#39;color:blue;font-size=20px&#39;&gt;万事万物皆对象&lt;/h1&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/body&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/html&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//浏览器一般为短连接，所以关闭接口</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;客户端下线了：&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">socket</span><span class="p">.</span><span class="na">getInetAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>用浏览器访问localhost:8080可以看到页面访问成功，<code>title</code>和<code>body</code>也如预想般正常显示






    






<div class="post-img-view">
  <a
    data-fancybox="post-post/B-S.md"
    href="https://www.steamedfish.top/images/java-se/B-S/1.png"
    data-caption=""
  >
    <img
      src="https://www.steamedfish.top/images/java-se/B-S/1.png"
      srcset="https://www.steamedfish.top/images/java-se/B-S/1.png 2x"
      alt="页面1"
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
</div>


</p>
<hr>
<p>至此一个基于B/S架构与HTTP协议的简单应用就做好了</p>
<p>接下来我们试着来对它进行一些优化 <br>
在之前的程序中，每次收到web端的HTTP请求时，程序都会创建一个线程来响应。<br>
当我们遇到大量请求时，就需要<strong>频繁的创建、销毁线程</strong> <br>
我们可以用<strong>线程池</strong>来解决这个问题</p>




<table>

    <thead>
      <tr>
          <th>优点</th>
          <th>说明</th>
      </tr>
    </thead>
    <tbody>
    
    
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>1. 提高性能</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">避免频繁创建和销毁线程，减少系统开销。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>2. 控制并发量</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">限制最大线程数，防止服务器被大量请求压垮。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>3. 提升响应速度</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">请求到来时可立即分配空闲线程，响应更快。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>4. 资源利用率高</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">空闲线程可被重复利用，不浪费系统资源。</td>
      </tr>
        
        
        
      <tr>
        
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: "><strong>5. 便于管理</strong></td>
            
            
            
            
            
                
                
                
                
                
                
                
                
                
                
                
                <td rowspan="1" colspan="1" style="text-align: ">可根据系统负载动态调整线程数（如Java的ThreadPoolExecutor）。</td>
      </tr>
  </tbody>
</table><p>ServerReader.java:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.d7_tcp4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.OutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.PrintStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.Socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerReader</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ServerReader</span><span class="p">(</span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//给当前对应的浏览器管道响应一个网页数据回去</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">socket</span><span class="p">.</span><span class="na">getOutputStream</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//通过字节输出流包装写出去的数据给浏览器</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//把字节输出流包装成打印流（自带换行）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">PrintStream</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="n">os</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//写相应的网页数据回去</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;HTTP/1.1 200 OK&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Content-Type:text/html;charset=utf-8&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="c1">//换行输出响应体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;html&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;head&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;meta charset=&#39;utf-8&#39;&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;title&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Java&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/title&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/head&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;body&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;h1 style=&#39;color:blue;font-size=20px&#39;&gt;万事万物皆对象&lt;/h1&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/body&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;&lt;/html&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//浏览器一般为短连接，所以关闭接口</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;客户端下线了：&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">socket</span><span class="p">.</span><span class="na">getInetAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>ServerDemo.java:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.d7_tcp4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.ServerSocket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.Socket</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ServerDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//目标：实现TCP下多收多发：服务端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====服务端启动=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.创建服务端ServerSocket对象，绑定端口号，监听客户端连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ServerSocket</span><span class="w"> </span><span class="n">ss</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ServerSocket</span><span class="p">(</span><span class="n">8080</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//创建线程池</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">3</span><span class="p">,</span><span class="n">10</span><span class="p">,</span><span class="n">10</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayBlockingQueue</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">100</span><span class="p">),</span><span class="w"> </span><span class="n">Executors</span><span class="p">.</span><span class="na">defaultThreadFactory</span><span class="p">(),</span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">.</span><span class="na">AbortPolicy</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//2.调用accept()方法，阻塞等待客户端连接，连接成功返回一个Socket对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Socket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="n">ss</span><span class="p">.</span><span class="na">accept</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;一个客户端上线了：&#34;</span><span class="o">+</span><span class="n">socket</span><span class="p">.</span><span class="na">getInetAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//3.把这个客户端交给线程池处理</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ServerReader</span><span class="p">(</span><span class="n">socket</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//有客户端连接，将其包装成socket对象，new一个ServerReader处理，然后线程池分配一个的空闲线程来执行该任务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.steamedfish.top/tags/b-s%E6%9E%B6%E6%9E%84/">B-S架构</a></li>
      <li><a href="https://www.steamedfish.top/tags/http%E5%8D%8F%E8%AE%AE/">HTTP协议</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://www.steamedfish.top/">©2025 SteamedFish&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>








<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"
/>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    Fancybox.bind("[data-fancybox]", {
      animated: true,                  
      showClass: 'fancybox-fadeIn',    
      hideClass: 'fancybox-fadeOut',   
      dragToClose: true                 
    });
  });
</script>





<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
