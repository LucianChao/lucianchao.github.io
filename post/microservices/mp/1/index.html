<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Mybatis Plus | SteamedFish&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="介绍
MybatisPlus（简称 MP）是一个 Mybatis 的增强工具 ，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。






    


       
    




  
    
  
    
  





快速入门
入门案例
需求：基于资料提供的项目，实现下列功能：

新增用户功能
根据id查询用户
根据id批量查询用户
根据id更新用户
根据id删除用户


步骤

运行src/test/java/com/itheima/mp/mapper/UserMapperTest.java下的testQueryByIds测试方法，查看环境是否正常






    


       
    




  
    
  
    
  




引入MybatisPlus的起步依赖
MyBatisPlus官方提供了starter，其中集成了Mybatis和MybatisPlus的所有功能，并且实现了自动装配效果。
因此我们可以用MybatisPlus的starter代替Mybatis的starter：






    


       
    




  
    
  
    
  










    


       
    




  
    
  
    
  




定义Mapper
自定义的Mapper继承MybatisPlus提供的BaseMapper接口：






    


       
    




  
    
  
    
  




改造Mapper
继承之后删掉Mapper中原本的代码






    


       
    




  
    
  
    
  










    


       
    




  
    
  
    
  




修改测试方法，使用Mybatis-plus的方法，查看能否进行增删改查


常见注解
MyBatisPlus通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。">
<meta name="author" content="">
<link rel="canonical" href="https://www.steamedfish.top/post/microservices/mp/1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c27e1246cb66d388c2c28ba2cad7d8e45b296bdd6da67c05cf15ef27e74594b2.css" integrity="sha256-wn4SRstm04jCwouiytfY5Fspa91tpnwFzxXvJ&#43;dFlLI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.steamedfish.top/favicon.png">
<link rel="apple-touch-icon" href="https://www.steamedfish.top/favicon.png">
<link rel="mask-icon" href="https://www.steamedfish.top/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://www.steamedfish.top/post/microservices/mp/1/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>





<link
  href="/fonts/lxgw/style.css"
  rel="stylesheet"
/><meta property="og:url" content="https://www.steamedfish.top/post/microservices/mp/1/">
  <meta property="og:site_name" content="SteamedFish&#39;s Blog">
  <meta property="og:title" content="Mybatis Plus">
  <meta property="og:description" content="介绍 MybatisPlus（简称 MP）是一个 Mybatis 的增强工具 ，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。 快速入门 入门案例 需求：基于资料提供的项目，实现下列功能：
新增用户功能 根据id查询用户 根据id批量查询用户 根据id更新用户 根据id删除用户 步骤 运行src/test/java/com/itheima/mp/mapper/UserMapperTest.java下的testQueryByIds测试方法，查看环境是否正常 引入MybatisPlus的起步依赖
MyBatisPlus官方提供了starter，其中集成了Mybatis和MybatisPlus的所有功能，并且实现了自动装配效果。
因此我们可以用MybatisPlus的starter代替Mybatis的starter： 定义Mapper
自定义的Mapper继承MybatisPlus提供的BaseMapper接口： 改造Mapper
继承之后删掉Mapper中原本的代码 修改测试方法，使用Mybatis-plus的方法，查看能否进行增删改查 常见注解 MyBatisPlus通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-12-30T16:21:57+08:00">
    <meta property="article:modified_time" content="2025-12-31T02:18:48+08:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mybatis Plus">
<meta name="twitter:description" content="介绍
MybatisPlus（简称 MP）是一个 Mybatis 的增强工具 ，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。






    


       
    




  
    
  
    
  





快速入门
入门案例
需求：基于资料提供的项目，实现下列功能：

新增用户功能
根据id查询用户
根据id批量查询用户
根据id更新用户
根据id删除用户


步骤

运行src/test/java/com/itheima/mp/mapper/UserMapperTest.java下的testQueryByIds测试方法，查看环境是否正常






    


       
    




  
    
  
    
  




引入MybatisPlus的起步依赖
MyBatisPlus官方提供了starter，其中集成了Mybatis和MybatisPlus的所有功能，并且实现了自动装配效果。
因此我们可以用MybatisPlus的starter代替Mybatis的starter：






    


       
    




  
    
  
    
  










    


       
    




  
    
  
    
  




定义Mapper
自定义的Mapper继承MybatisPlus提供的BaseMapper接口：






    


       
    




  
    
  
    
  




改造Mapper
继承之后删掉Mapper中原本的代码






    


       
    




  
    
  
    
  










    


       
    




  
    
  
    
  




修改测试方法，使用Mybatis-plus的方法，查看能否进行增删改查


常见注解
MyBatisPlus通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.steamedfish.top/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Mybatis Plus",
      "item": "https://www.steamedfish.top/post/microservices/mp/1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mybatis Plus",
  "name": "Mybatis Plus",
  "description": "介绍 MybatisPlus（简称 MP）是一个 Mybatis 的增强工具 ，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。 快速入门 入门案例 需求：基于资料提供的项目，实现下列功能：\n新增用户功能 根据id查询用户 根据id批量查询用户 根据id更新用户 根据id删除用户 步骤 运行src/test/java/com/itheima/mp/mapper/UserMapperTest.java下的testQueryByIds测试方法，查看环境是否正常 引入MybatisPlus的起步依赖\nMyBatisPlus官方提供了starter，其中集成了Mybatis和MybatisPlus的所有功能，并且实现了自动装配效果。\n因此我们可以用MybatisPlus的starter代替Mybatis的starter： 定义Mapper\n自定义的Mapper继承MybatisPlus提供的BaseMapper接口： 改造Mapper\n继承之后删掉Mapper中原本的代码 修改测试方法，使用Mybatis-plus的方法，查看能否进行增删改查 常见注解 MyBatisPlus通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。\n",
  "keywords": [
    
  ],
  "articleBody": "介绍 MybatisPlus（简称 MP）是一个 Mybatis 的增强工具 ，在Mybatis的基础上只做增强不做改变，为简化开发、提高效率而生。 快速入门 入门案例 需求：基于资料提供的项目，实现下列功能：\n新增用户功能 根据id查询用户 根据id批量查询用户 根据id更新用户 根据id删除用户 步骤 运行src/test/java/com/itheima/mp/mapper/UserMapperTest.java下的testQueryByIds测试方法，查看环境是否正常 引入MybatisPlus的起步依赖\nMyBatisPlus官方提供了starter，其中集成了Mybatis和MybatisPlus的所有功能，并且实现了自动装配效果。\n因此我们可以用MybatisPlus的starter代替Mybatis的starter： 定义Mapper\n自定义的Mapper继承MybatisPlus提供的BaseMapper接口： 改造Mapper\n继承之后删掉Mapper中原本的代码 修改测试方法，使用Mybatis-plus的方法，查看能否进行增删改查 常见注解 MyBatisPlus通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。\n类名驼峰转下划线作为表名 名为id的字段作为主键 变量名驼峰转下划线作为表的字段名 MybatisPlus中比较常用的几个注解如下： @TableName：用来指定表名 @TableId：用来指定表中的主键字段信息 IdType枚举： AUTO：数据库自增长 INPUT：通过set方法自行输入 ASSIGN_ID：分配 ID，接口IdentifierGenerator的方法nextId来生成id，默认实现类为DefaultIdentifierGenerator雪花算法 @TableField：用来指定表中的普通字段信息 使用@TableField的常见场景： 成员变量名与数据库字段名不一致 成员变量名以is开头，且是布尔值 成员变量名与数据库关键字冲突 成员变量不是数据库字段 常见配置 MyBatisPlus的配置项继承了MyBatis原生配置和一些自己特有的配置。例如： 具体可参考官方文档：使用配置 | MyBatis-Plus\n核心功能 条件构造器 MyBatisPlus支持各种复杂的where条件，可以满足日常开发的所有需求。 基于QueryWrapper的查询 需求：\n查询出名字中带o的，存款大于等于1000元的人的id、username、info、balance字段 @Test public void testQueryWrapper() { //条件构造器 QueryWrapper\u003cUser\u003e queryWrapper = new QueryWrapper\u003c\u003e(); //查询的列 queryWrapper.select(\"id\", \"username\", \"info\", \"balance\"); //查询条件： 名字带`o` queryWrapper.like(\"username\", \"o\"); //查询条件： 存款大于等于1000 queryWrapper.ge(\"balance\", 1000); //查询 List\u003cUser\u003e userList = userMapper.selectList(queryWrapper); //输出 //userList.forEach(System.out::println); for (User user : userList) { System.out.println(user); } } @Test public void testLambdaQueryWrapper() { LambdaQueryWrapper\u003cUser\u003e lambdaQueryWrapper = new LambdaQueryWrapper\u003c\u003e(); lambdaQueryWrapper.select(User::getId,User::getUsername,User::getInfo,User::getBalance); lambdaQueryWrapper.like(User::getUsername, \"o\"); lambdaQueryWrapper.ge(User::getBalance, 1000); List\u003cUser\u003e userList = userMapper.selectList(lambdaQueryWrapper); for (User user : userList) { System.out.println(user); } } 提示\n尽量使用LambdaQueryWrapper和LambdaUpdateWrapper，避免硬编码 QueryWrapper和LambdaQueryWrapper通常用来构建select、delete、update的where条件部分 UpdateWrapper和LambdaUpdateWrapper通常只有在set语句比较特殊才使用 更新用户名为jack的用户的余额为2000 @Test public void testQueryWrapperUpdate() { User user = new User(); user.setBalance(2000); QueryWrapper\u003cUser\u003e queryWrapper = new QueryWrapper\u003c\u003e(); queryWrapper.eq(\"username\", \"jack\"); int updated = userMapper.update(user, queryWrapper); } 基于UpdateWrapper的更新 需求：更新id为1,2,4的用户的余额，扣200 // update user set balance = balance - 200 where id in (1, 2, 4); @Test void testUpdateWrapper() { UpdateWrapper\u003cUser\u003e updateWrapper = new UpdateWrapper\u003c\u003e(); //自定义更新语句，设置的是set updateWrapper.setSql(\"balance = balance - 200\"); //id为1，2，4的用户 -- where id in (1,2,4) updateWrapper.in(\"id\", 1, 2, 4); userMapper.update(null, updateWrapper); } 自定义SQL 我们可以利用yBatisPlus的Wrapper来构建复杂的Where条件，然后自己定义SQL语句中剩下的部分。 基于Wrapper构建where条件 在mapper方法参数中用Param注解声明wrapper变量名称，必须是ew 自定义SQL，并使用Wrapper条件 基于Wrapper的多表关联查询 需求：查询出所有收货地址在北京的并且用户id在指定范围的用户（例如1、2、4 ）的用户 Service接口 使用流程 自定义Service接口继承IService接口 自定义Service实现类，实现自定义接口并继承ServiceImpl类 基于Restful风格实现下列接口 需求：基于Restful风格实现下面的接口： 分析：1,2,3,4是常见的基本接口，可以直接在controller中调用mybatisPlus的service接口提供的方法实现；不需要再写任何业务方法\n5这个接口有特别的业务逻辑（判断用户正常（不为2）、余额充足才能做扣减），需要在Service中新增方法来实现\n要编写具体的接口，实现web功能；需要引入spring-boot-starter-web；\n另外为了方便测试可以引入knife4j的依赖；通过访问界面来测试所写的接口。\n因此我们可以添加如下依赖： 要能够被swagger可访问测试接口的话，在处理编写时可以设置对应注解，示例如下： 新增业务方法 特殊的业务方法，mybatisPlus中没有提供的，则可以自定义编写 拓展功能 分页插件 项目实战 ",
  "wordCount" : "2072",
  "inLanguage": "zh",
  "datePublished": "2025-12-30T16:21:57+08:00",
  "dateModified": "2025-12-31T02:18:48+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.steamedfish.top/post/microservices/mp/1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SteamedFish's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.steamedfish.top/favicon.png"
    }
  }
}
</script>
</head>

<body data-barba="wrapper" class="" id="top">

<div id="aplayer"></div>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.steamedfish.top/" accesskey="h" title="SteamedFish&#39;s Blog (Alt + H)">SteamedFish&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                    <ul class="lang-switch"><li>|</li>
                        <li>
                            <a href="https://www.steamedfish.top/en/" title="English"
                                aria-label="English">En</a>
                        </li>
                    </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.steamedfish.top/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main" data-barba="container" data-barba-namespace="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Mybatis Plus
    </h1>
    <div class="post-meta">






<span title='2025-12-30 16:21:57 +0800 +0800'>2025-12-30</span>&nbsp;·&nbsp;<span title='2025-12-31 02:18:48 +0800 +0800'>(最后修改于 2025-12-31)</span>&nbsp;·&nbsp;<span>5 分钟</span>&nbsp;|&nbsp;<span>
    <a href="https://github.com/LucianChao/Hugo_Blog/tree/main/content/post/microservices/mp/1/index.md" rel="noopener noreferrer edit" target="_blank">编辑此文章</a>
</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%bb%8b%e7%bb%8d" aria-label="介绍">介绍</a></li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8" aria-label="快速入门">快速入门</a><ul>
                        
                <li>
                    <a href="#%e5%85%a5%e9%97%a8%e6%a1%88%e4%be%8b" aria-label="入门案例">入门案例</a><ul>
                        
                <li>
                    <a href="#%e6%ad%a5%e9%aa%a4" aria-label="步骤">步骤</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e6%b3%a8%e8%a7%a3" aria-label="常见注解">常见注解</a></li>
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e9%85%8d%e7%bd%ae" aria-label="常见配置">常见配置</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%a0%b8%e5%bf%83%e5%8a%9f%e8%83%bd" aria-label="核心功能">核心功能</a><ul>
                        
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6%e6%9e%84%e9%80%a0%e5%99%a8" aria-label="条件构造器">条件构造器</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8equerywrapper%e7%9a%84%e6%9f%a5%e8%af%a2" aria-label="基于QueryWrapper的查询">基于QueryWrapper的查询</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8eupdatewrapper%e7%9a%84%e6%9b%b4%e6%96%b0" aria-label="基于UpdateWrapper的更新">基于UpdateWrapper的更新</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89sql" aria-label="自定义SQL">自定义SQL</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8ewrapper%e7%9a%84%e5%a4%9a%e8%a1%a8%e5%85%b3%e8%81%94%e6%9f%a5%e8%af%a2" aria-label="基于Wrapper的多表关联查询">基于Wrapper的多表关联查询</a></li></ul>
                </li>
                <li>
                    <a href="#service%e6%8e%a5%e5%8f%a3" aria-label="Service接口">Service接口</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e6%b5%81%e7%a8%8b" aria-label="使用流程">使用流程</a></li>
                <li>
                    <a href="#%e5%9f%ba%e4%ba%8erestful%e9%a3%8e%e6%a0%bc%e5%ae%9e%e7%8e%b0%e4%b8%8b%e5%88%97%e6%8e%a5%e5%8f%a3" aria-label="基于Restful风格实现下列接口">基于Restful风格实现下列接口</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e6%8b%93%e5%b1%95%e5%8a%9f%e8%83%bd" aria-label="拓展功能">拓展功能</a></li>
                <li>
                    <a href="#%e5%88%86%e9%a1%b5%e6%8f%92%e4%bb%b6" aria-label="分页插件">分页插件</a></li>
                <li>
                    <a href="#%e9%a1%b9%e7%9b%ae%e5%ae%9e%e6%88%98" aria-label="项目实战">项目实战</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="介绍">介绍<a hidden class="anchor" aria-hidden="true" href="#介绍">#</a></h2>
<p>MybatisPlus（简称 <strong>MP</strong>）是一个 <strong>Mybatis 的增强工具</strong> ，在Mybatis的基础上只做增强不做改变，为<strong>简化开发</strong>、提高效率而生。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/1.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/1.webp"
      srcset="/post/microservices/mp/1/1.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<hr>
<h2 id="快速入门">快速入门<a hidden class="anchor" aria-hidden="true" href="#快速入门">#</a></h2>
<h3 id="入门案例">入门案例<a hidden class="anchor" aria-hidden="true" href="#入门案例">#</a></h3>
<p>需求：基于资料提供的项目，实现下列功能：</p>
<ol>
<li>新增用户功能</li>
<li>根据id查询用户</li>
<li>根据id批量查询用户</li>
<li>根据id更新用户</li>
<li>根据id删除用户</li>
</ol>
<hr>
<h4 id="步骤">步骤<a hidden class="anchor" aria-hidden="true" href="#步骤">#</a></h4>
<ol>
<li>运行<code>src/test/java/com/itheima/mp/mapper/UserMapperTest.java</code>下的<code>testQueryByIds</code>测试方法，查看环境是否正常






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/4.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/4.webp"
      srcset="/post/microservices/mp/1/4.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>引入MybatisPlus的起步依赖<br>
<code>MyBatisPlus</code>官方提供了<code>starter</code>，其中集成了<code>Mybatis</code>和<code>MybatisPlus</code>的所有功能，并且实现了自动装配效果。<br>
因此我们可以用<code>MybatisPlus</code>的<code>starter</code>代替<code>Mybatis</code>的<code>starter</code>：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/2.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/2.png"
      srcset="/post/microservices/mp/1/2.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/5.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/5.webp"
      srcset="/post/microservices/mp/1/5.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>定义Mapper<br>
自定义的Mapper继承MybatisPlus提供的BaseMapper接口：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/3.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/3.png"
      srcset="/post/microservices/mp/1/3.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>改造Mapper<br>
继承之后删掉Mapper中原本的代码






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/6.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/6.webp"
      srcset="/post/microservices/mp/1/6.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/7.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/7.webp"
      srcset="/post/microservices/mp/1/7.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>修改测试方法，使用<code>Mybatis-plus</code>的方法，查看能否进行增删改查</li>
</ol>
<hr>
<h3 id="常见注解">常见注解<a hidden class="anchor" aria-hidden="true" href="#常见注解">#</a></h3>
<p><strong>MyBatisPlus</strong>通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。</p>
<ul>
<li>类名驼峰转下划线作为表名</li>
<li>名为id的字段作为主键</li>
<li>变量名驼峰转下划线作为表的字段名






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/8.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/8.png"
      srcset="/post/microservices/mp/1/8.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



MybatisPlus中比较常用的几个注解如下：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/10.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/10.png"
      srcset="/post/microservices/mp/1/10.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="https://www.steamedfish.top/9.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="https://www.steamedfish.top/9.png"
      srcset="https://www.steamedfish.top/9.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li><code>@TableName</code>：用来指定表名</li>
<li><code>@TableId</code>：用来指定表中的主键字段信息
<ul>
<li><code>IdType</code>枚举：
<ul>
<li><code>AUTO</code>：数据库自增长</li>
<li><code>INPUT</code>：通过set方法自行输入</li>
<li><code>ASSIGN_ID</code>：分配 <code>ID</code>，接口<code>IdentifierGenerator</code>的方法<code>nextId</code>来生成<code>id</code>，默认实现类为<code>DefaultIdentifierGenerator</code>雪花算法</li>
</ul>
</li>
</ul>
</li>
<li><code>@TableField</code>：用来指定表中的普通字段信息
<ul>
<li>使用@TableField的常见场景：
<ul>
<li>成员变量名与数据库字段名不一致</li>
<li>成员变量名以is开头，且是布尔值</li>
<li>成员变量名与数据库关键字冲突</li>
<li>成员变量不是数据库字段</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="常见配置">常见配置<a hidden class="anchor" aria-hidden="true" href="#常见配置">#</a></h3>
<p>MyBatisPlus的配置项继承了MyBatis原生配置和一些自己特有的配置。例如：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/11.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/11.png"
      srcset="/post/microservices/mp/1/11.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



具体可参考官方文档：<a href="https://baomidou.com/reference/">使用配置 | MyBatis-Plus</a></p>
<hr>
<h2 id="核心功能">核心功能<a hidden class="anchor" aria-hidden="true" href="#核心功能">#</a></h2>
<h3 id="条件构造器">条件构造器<a hidden class="anchor" aria-hidden="true" href="#条件构造器">#</a></h3>
<p><strong>MyBatisPlus</strong>支持各种复杂的<code>where</code>条件，可以满足日常开发的所有需求。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/14.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/14.png"
      srcset="/post/microservices/mp/1/14.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/12.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/12.png"
      srcset="/post/microservices/mp/1/12.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/13.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/13.png"
      srcset="/post/microservices/mp/1/13.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<h4 id="基于querywrapper的查询">基于QueryWrapper的查询<a hidden class="anchor" aria-hidden="true" href="#基于querywrapper的查询">#</a></h4>
<p>需求：</p>
<ol>
<li>查询出名字中带o的，存款大于等于1000元的人的id、username、info、balance字段






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/15.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/15.png"
      srcset="/post/microservices/mp/1/15.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testQueryWrapper</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//条件构造器</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">queryWrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//查询的列</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">queryWrapper</span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;username&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;info&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;balance&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//查询条件： 名字带`o`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">queryWrapper</span><span class="p">.</span><span class="na">like</span><span class="p">(</span><span class="s">&#34;username&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;o&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//查询条件： 存款大于等于1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">queryWrapper</span><span class="p">.</span><span class="na">ge</span><span class="p">(</span><span class="s">&#34;balance&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">1000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//查询</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">queryWrapper</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//输出</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//userList.forEach(System.out::println);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w"> </span><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testLambdaQueryWrapper</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lambdaQueryWrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LambdaQueryWrapper</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">lambdaQueryWrapper</span><span class="p">.</span><span class="na">select</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getId</span><span class="p">,</span><span class="n">User</span><span class="p">::</span><span class="n">getUsername</span><span class="p">,</span><span class="n">User</span><span class="p">::</span><span class="n">getInfo</span><span class="p">,</span><span class="n">User</span><span class="p">::</span><span class="n">getBalance</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">lambdaQueryWrapper</span><span class="p">.</span><span class="na">like</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getUsername</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;o&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">lambdaQueryWrapper</span><span class="p">.</span><span class="na">ge</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getBalance</span><span class="p">,</span><span class="w"> </span><span class="n">1000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">userList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">selectList</span><span class="p">(</span><span class="n">lambdaQueryWrapper</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">userList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
<!-- FM:Snippet:Start data:{"id":"st-notice","fields":[]} -->
<style type="text/css">
     
    .notice {
        --title-color: #fff;
        --title-background-color: #6be;
        --content-color: #444;
        --content-background-color: #e7f2fa;
    }

    .notice.info {
        --title-background-color: #fb7;
        --content-background-color: #fec;
    }

    .notice.tip {
        --title-background-color: #5a5;
        --content-background-color: #efe;
    }

    .notice.warning {
        --title-background-color: #c33;
        --content-background-color: #fee;
    }

     
    

    body.dark .notice {
        --title-color: #fff;
        --title-background-color: #069;
        --content-color: #ddd;
        --content-background-color: #023;
    }

    body.dark .notice.info {
        --title-background-color: #a50;
        --content-background-color: #420;
    }

    body.dark .notice.tip {
        --title-background-color: #363;
        --content-background-color: #121;
    }

    body.dark .notice.warning {
        --title-background-color: #800;
        --content-background-color: #400;
    }

     
    .notice {
        padding: 18px;
        line-height: 24px;
        margin-bottom: 24px;
        border-radius: 4px;
        color: var(--content-color);
        background: var(--content-background-color);
    }

    .notice p:last-child {
        margin-bottom: 0
    }

     
    .notice-title {
        margin: -18px -18px 12px;
        padding: 4px 18px;
        border-radius: 4px 4px 0 0;
        font-weight: 700;
        color: var(--title-color);
        background: var(--title-background-color);
    }

     
    .icon-notice {
        display: inline-flex;
        align-self: center;
        margin-right: 8px;
    }

    .icon-notice img,
    .icon-notice svg {
        height: 1em;
        width: 1em;
        fill: currentColor;
    }

    .icon-notice img,
    .icon-notice.baseline svg {
        top: .125em;
        position: relative;
    }
</style><div class="notice tip" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
        </span>提示</p><ul>
<li>尽量使用<code>LambdaQueryWrapper</code>和<code>LambdaUpdateWrapper</code>，避免硬编码</li>
<li><code>QueryWrapper</code>和<code>LambdaQueryWrapper</code>通常用来构建<code>select</code>、<code>delete</code>、<code>update</code>的<code>where</code>条件部分</li>
<li><code>UpdateWrapper</code>和<code>LambdaUpdateWrapper</code>通常只有在<code>set</code>语句比较特殊才使用</li>
</ul></div>
<!-- FM:Snippet:End -->
<ol start="2">
<li>更新用户名为jack的用户的余额为2000






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/16.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/16.png"
      srcset="/post/microservices/mp/1/16.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w"> </span><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testQueryWrapperUpdate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">user</span><span class="p">.</span><span class="na">setBalance</span><span class="p">(</span><span class="n">2000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">queryWrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QueryWrapper</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">queryWrapper</span><span class="p">.</span><span class="na">eq</span><span class="p">(</span><span class="s">&#34;username&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;jack&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userMapper</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">queryWrapper</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ol>
<h4 id="基于updatewrapper的更新">基于UpdateWrapper的更新<a hidden class="anchor" aria-hidden="true" href="#基于updatewrapper的更新">#</a></h4>
<p>需求：更新id为1,2,4的用户的余额，扣200






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/17.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/17.png"
      srcset="/post/microservices/mp/1/17.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// update user set balance = balance - 200 where id in (1, 2, 4);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testUpdateWrapper</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">UpdateWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="n">updateWrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UpdateWrapper</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//自定义更新语句，设置的是set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">updateWrapper</span><span class="p">.</span><span class="na">setSql</span><span class="p">(</span><span class="s">&#34;balance = balance - 200&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//id为1，2，4的用户 -- where id in (1,2,4)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">updateWrapper</span><span class="p">.</span><span class="na">in</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="n">4</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">userMapper</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">updateWrapper</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><hr>
<h3 id="自定义sql">自定义SQL<a hidden class="anchor" aria-hidden="true" href="#自定义sql">#</a></h3>
<p>我们可以利用<code>yBatisPlus</code>的<code>Wrapper</code>来构建复杂的<code>Where</code>条件，然后自己定义SQL语句中剩下的部分。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/18.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/18.png"
      srcset="/post/microservices/mp/1/18.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<ol>
<li>基于Wrapper构建where条件






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/19.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/19.png"
      srcset="/post/microservices/mp/1/19.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>在mapper方法参数中用Param注解声明wrapper变量名称，必须是ew






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/20.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/20.png"
      srcset="/post/microservices/mp/1/20.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>自定义SQL，并使用Wrapper条件






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/21.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/21.png"
      srcset="/post/microservices/mp/1/21.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
</ol>
<h4 id="基于wrapper的多表关联查询">基于Wrapper的多表关联查询<a hidden class="anchor" aria-hidden="true" href="#基于wrapper的多表关联查询">#</a></h4>
<p>需求：查询出所有收货地址在北京的并且用户id在指定范围的用户（例如1、2、4 ）的用户






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/26.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/26.png"
      srcset="/post/microservices/mp/1/26.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<hr>
<h3 id="service接口">Service接口<a hidden class="anchor" aria-hidden="true" href="#service接口">#</a></h3>
<p>





    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/22.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/22.png"
      srcset="/post/microservices/mp/1/22.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/23.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/23.png"
      srcset="/post/microservices/mp/1/23.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<h4 id="使用流程">使用流程<a hidden class="anchor" aria-hidden="true" href="#使用流程">#</a></h4>
<ol>
<li>自定义Service接口继承IService接口






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/24.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/24.png"
      srcset="/post/microservices/mp/1/24.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>自定义Service实现类，实现自定义接口并继承ServiceImpl类</li>
</ol>
<h4 id="基于restful风格实现下列接口">基于Restful风格实现下列接口<a hidden class="anchor" aria-hidden="true" href="#基于restful风格实现下列接口">#</a></h4>
<p>需求：基于Restful风格实现下面的接口：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/25.png"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/25.png"
      srcset="/post/microservices/mp/1/25.png 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



分析：<code>1,2,3,4</code>是常见的基本接口，可以直接在<code>controller</code>中调用<code>mybatisPlus</code>的<code>service</code>接口提供的方法实现；不需要再写任何业务方法<br>
<code>5</code>这个接口有特别的业务逻辑（判断用户正常（不为2）、余额充足才能做扣减），需要在<code>Service</code>中新增方法来实现</p>
<ol>
<li>要编写具体的接口，实现web功能；需要引入<code>spring-boot-starter-web</code>；<br>
另外为了方便测试可以引入<code>knife4j</code>的依赖；通过访问界面来测试所写的接口。<br>
因此我们可以添加如下依赖：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/27.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/27.webp"
      srcset="/post/microservices/mp/1/27.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>要能够被<code>swagger</code>可访问测试接口的话，在处理编写时可以设置对应注解，示例如下：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/microservices/mp/1/index.md"
    href="/post/microservices/mp/1/28.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/microservices/mp/1/28.webp"
      srcset="/post/microservices/mp/1/28.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>新增业务方法
特殊的业务方法，<code>mybatisPlus</code>中没有提供的，则可以自定义编写</li>
</ol>
<h2 id="拓展功能">拓展功能<a hidden class="anchor" aria-hidden="true" href="#拓展功能">#</a></h2>
<h2 id="分页插件">分页插件<a hidden class="anchor" aria-hidden="true" href="#分页插件">#</a></h2>
<h2 id="项目实战">项目实战<a hidden class="anchor" aria-hidden="true" href="#项目实战">#</a></h2>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://www.steamedfish.top/">©2025 SteamedFish&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script src="https://unpkg.com/@barba/core"></script>


<script>
  window.PaperMod = window.PaperMod || {};
  PaperMod.state = { once: false };

  PaperMod.initOnce = function () {
    if (PaperMod.state.once) return;
    PaperMod.state.once = true;

    console.log("PaperMod initOnce");

    if (PaperMod.initAPlayer) {
      PaperMod.initAPlayer();
    }
  };

  PaperMod.initPage = function (container = document) {
    console.log("PaperMod initPage");

    PaperMod.initFancybox && PaperMod.initFancybox(container);
    PaperMod.initCodeCopyButtons && PaperMod.initCodeCopyButtons(container);
  };

  barba.init({
    transitions: [
      {
        name: "default",
        leave() {
          return Promise.resolve();
        },
        enter(data) {
          PaperMod.initOnce();
          PaperMod.initPage(data.next.container);
        },
      },
    ],
  });
  
  document.addEventListener("DOMContentLoaded", () => {
    PaperMod.initOnce();
    PaperMod.initPage(document);
  });
</script>







<link
  href="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.css"
  rel="stylesheet"
/>
<script src="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/meting/2.0.2/Meting.min.js"></script>
<script>
  window.PaperMod = window.PaperMod || {};
  console.log("player.js loaded");
  PaperMod.initAPlayer = async function () {
    if (window.__aplayer_inited__) {
      console.log("APlayer already exists, skip");
      return;
    }

    const container = document.getElementById("aplayer");
    if (!container) {
      console.warn("APlayer container not found");
      return;
    }

    console.log("Init APlayer");
    

    const localAudio = [
      
      
      
      
      
      
      
      
    ];

    

    let metingAudio = [];
    try {
      const res = await fetch(
        
        
        "https://api.qijieya.cn/meting/?type=playlist&id=2245453903"
        
        
      );
      metingAudio = await res.json();
    } catch (e) {
      console.warn("Meting load failed, fallback to local only");
    }

    

    const audioList = [...localAudio, ...metingAudio];

    window.aplayer = new APlayer({
      container,
      fixed: true,
      autoplay: false,
      preload: "auto",
      lrcType: 1,
      
      audio: metingAudio,
    });
    console.log("APlayer created with", audioList.length, "tracks");
  };
</script>



<script>
  window.PaperMod = window.PaperMod || {};

  PaperMod.initCodeCopyButtons = function (root = document) {
    root.querySelectorAll("pre > code").forEach((codeblock) => {
      const container = codeblock.parentNode.parentNode;

      
      if (container.querySelector(".copy-code")) return;

      const copybutton = document.createElement("button");
      copybutton.classList.add("copy-code");
      copybutton.innerHTML = '复制';

      function copyingDone() {
        copybutton.innerHTML = '已复制！';
        setTimeout(() => {
          copybutton.innerHTML = '复制';
        }, 2000);
      }

      copybutton.addEventListener("click", (cb) => {
        if ("clipboard" in navigator) {
          navigator.clipboard.writeText(codeblock.textContent);
          copyingDone();
          return;
        }

        const range = document.createRange();
        range.selectNodeContents(codeblock);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        try {
          document.execCommand("copy");
          copyingDone();
        } catch (e) {}
        selection.removeRange(range);
      });
      container.appendChild(copybutton);
    });
  };
</script>


<link rel="stylesheet" href="/lib/fancybox/fancybox.css" />
<script src="/lib/fancybox/fancybox.umd.js"></script>
<script>
  function initFancybox() {
    Fancybox.unbind("[data-fancybox]");

    Fancybox.bind("[data-fancybox]", {
      animated: true,
      showClass: "fancybox-fadeIn",
      hideClass: "fancybox-fadeOut",
      dragToClose: true,
    });
  }

  
  if (document.readyState !== "loading") {
    initFancybox();
  } else {
    document.addEventListener("DOMContentLoaded", initFancybox);
  }
  
  document.addEventListener("barba:afterEnter", initFancybox);
</script>







<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
