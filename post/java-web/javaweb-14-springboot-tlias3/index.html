<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询 | SteamedFish&#39;s Blog</title>
<meta name="keywords" content="MySQL, 多表查询, 多表设计, 实战项目, 多表关系">
<meta name="description" content="多表关系
项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间
相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：

一对多(多对一)
一对一
多对多


一对多（多对一）

场景：部门与员工的关系（一个部门下有多个员工）。






    


       
    




  
    
  
    
  




在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键


多表问题分析
新建数据库javaweb-db04，运行建表语句">
<meta name="author" content="">
<link rel="canonical" href="https://www.steamedfish.top/post/java-web/javaweb-14-springboot-tlias3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.48569ef1d09dace3351ba549c3a7d634e59d1a68544f48e0de83f555e5c3e16e.css" integrity="sha256-SFae8dCdrOM1G6VJw6fWNOWdGmhUT0jg3oP1VeXD4W4=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.steamedfish.top/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.steamedfish.top/favicon.png">
<link rel="apple-touch-icon" href="https://www.steamedfish.top/favicon.png">
<link rel="mask-icon" href="https://www.steamedfish.top/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://www.steamedfish.top/post/java-web/javaweb-14-springboot-tlias3/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>





<link
  href="/fonts/lxgw/style.css"
  rel="stylesheet"
/><meta property="og:url" content="https://www.steamedfish.top/post/java-web/javaweb-14-springboot-tlias3/">
  <meta property="og:site_name" content="SteamedFish&#39;s Blog">
  <meta property="og:title" content="Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询">
  <meta property="og:description" content="多表关系 项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间 相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：
一对多(多对一) 一对一 多对多 一对多（多对一） 场景：部门与员工的关系（一个部门下有多个员工）。 在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键 多表问题分析 新建数据库javaweb-db04，运行建表语句">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-11-28T11:41:46+08:00">
    <meta property="article:modified_time" content="2025-11-29T01:12:16+08:00">
    <meta property="article:tag" content="Mysql">
    <meta property="article:tag" content="多表查询">
    <meta property="article:tag" content="多表设计">
    <meta property="article:tag" content="实战项目">
    <meta property="article:tag" content="多表关系">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询">
<meta name="twitter:description" content="多表关系
项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间
相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：

一对多(多对一)
一对一
多对多


一对多（多对一）

场景：部门与员工的关系（一个部门下有多个员工）。






    


       
    




  
    
  
    
  




在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键


多表问题分析
新建数据库javaweb-db04，运行建表语句">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.steamedfish.top/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询",
      "item": "https://www.steamedfish.top/post/java-web/javaweb-14-springboot-tlias3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询",
  "name": "Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询",
  "description": "多表关系 项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间 相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：\n一对多(多对一) 一对一 多对多 一对多（多对一） 场景：部门与员工的关系（一个部门下有多个员工）。 在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键 多表问题分析 新建数据库javaweb-db04，运行建表语句\n",
  "keywords": [
    "MySQL", "多表查询", "多表设计", "实战项目", "多表关系"
  ],
  "articleBody": "多表关系 项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间 相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：\n一对多(多对一) 一对一 多对多 一对多（多对一） 场景：部门与员工的关系（一个部门下有多个员工）。 在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键 多表问题分析 新建数据库javaweb-db04，运行建表语句\n现象：部门数据可以直接删除，然而还有部分员工归属于该部门下，此时就出现了数据的不完整、不一致问题。 原因：目前上述的两张表，在数据库层面，并未建立关联，所以是无法保证数据的一致性和完整性的。 解决方案：外键。 外键约束 可以在创建表时或表结构创建完成后，为字段添加外键约束。具体语法如下： 物理外键： 概念：使用foreignkey定义外键关联另外一张表。 缺点： 影响增、删、改的效率（需要检查外键关系）。 仅用于单节点数据库，不适用与分布式、集群场景 容易引发数据库的死锁问题，消耗性能。 逻辑外键 概念：在业务层逻辑中，解决外键关联。 通过逻辑外键，就可以很方便的解决上述问题。 外键约束的作用： 多表操作中保证数据的一致性、完整性和正确性 一对一 案例：用户与身份证信息的关系 关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中 ，其他字段放在另一张表中，以提升操作效率 在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的（UNIQUE） 多对多 案例：学生与课程的关系 关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择 实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键 案例 需求：请根据资料中提供的页面原型，设计员工模块涉及到的表结构。 步骤： 阅读页面原型及需求文档，分析各个模块涉及到的表结构及表结构之间的关系。 根据页面原型及需求文档，分析各个表结构中具体的字段及约束。 多表查询 多表查询：指从多张表中查询数据 笛卡尔积：笛卡尔乘积是指在数学中，两个集合（A集合和B集合）的所有组合情况。（在多表查询时，需要消除无效的笛卡尔积） 示例： -- 单表查询 select * from emp; -- 32条 select * from dept; -- 7条 -- 多表查询 select * from emp,dept; -- 224条 = 32 * 7 -- 消除无效笛卡尔积 select * from emp,dept where emp.dept_id = dept.id; -- 32条 多表查询的分类 连接查询 内连接：相当于查询A、B交集部分数据 外连接 左外连接：查询 左表 所有数据（包括两张表交集部分） 右外连接：查询 右表 所有数据（包括两张表交集部分） 子查询 内连接 内连接查询的是两张表交集部分数据。具体语法为：\n-- 1.隐式内连接 select 字段列表 from 表1 , 表2 where 连接条件 ...; -- 2.显式内连接 select 字段列表 from 表1 [inner] join 表2 on 连接条件 ...; -- 1.给表起别名 select 字段列表 from 表1 [as] 别名1, 表2 [as] 别名2 where 条件 ...; 信息\n一旦为表指定了别名，就要通过别名来指定字段名，而不能再使用表名了。\n示例：\n-- =================内连接==================== -- A. 查询所有员工的ID、姓名，及所属部门的部门名称（隐式、显式内连接实现） -- 涉及到的表：emp、dept -- 隐式内连接 select emp.id,emp.name,dept.name from emp,dept where emp.dept_id =dept.id; -- 显式内连接 [inner] join ... on ... select emp.id,emp.name,dept.name from emp inner join dept on emp.dept_id = dept.id; select emp.id,emp.name,dept.name from emp join dept on emp.dept_id = dept.id; -- B. 查询性别为男，且工资高于8000 的员工的ID，姓名，及所属的部门名称 -- 涉及表：emp、dept -- 隐式内连接 select emp.id,emp.name,dept.name from emp,dept where emp.dept_id = dept.id and emp.gender = 1 and emp.salary \u003e8000; -- 显式内连接 select emp.id,emp.name,dept.name from emp join dept on emp.dept_id = dept.id where emp.gender = 1 and emp.salary \u003e8000; 外连接 外连接分为左外连接和右外连接。具体语法为：\n-- 1.左外连接 select 字段列表 from 表1 left [outer] join 表2 on 连接条件 ...; -- 2.右外连接 select 字段列表 from 表1 right [outer] join 表2 on 连接条件 ...; 提示\n对于外连接，常用的是左外连接，因为右外连接的SQL也可以改造成为左外连接（两张表调换个顺序）。\n示例：\n-- =================外连接==================== -- A. 查询员工表 所有员工的ID、姓名，及所属部门的部门名称（左外连接） select emp.*,dept.name from emp left join dept on emp.dept_id = dept.id; -- B. 查询部门表 所有部门的ID、名称，及部门下所有员工的ID、姓名（右外连接） select dept.*,emp.name from emp right join dept on emp.dept_id = dept.id; -- 改成左外连接 select dept.*,emp.name from dept left join emp on emp.dept_id = dept.id; -- C. 查询工资 高于8000 的所有员工的姓名，和对应的部门名称（左外连接） select emp.name,dept.name from emp left join dept on emp.dept_id = dept.id where emp.salary \u003e 8000; 子查询 介绍：SQL语句中嵌套select语句，称为嵌套查询，又称子查询。 形式: select * from t1 where column1 =(select column1 from t2 ...); 说明：子查询外部的语句可以是insert / update / delete / select的任何一个，最常见的是select。 分类： 标量子查询：子查询返回的结果为单个值 列子查询：子查询返回的结果为一列 行子查询：子查询返回的结果为一行 表子查询：子查询返回的结果为多行多列 提示\n子查询的要点是，先对需求做拆分，明确具体的步骤，然后再逐步编写SQL语句。\n示例：\n-- =================子查询==================== -- 标量子查询 -- A. 查询 最早入职 的员工信息 -- 1. 查询最早入职的日期（最小的日期） select min(emp.entry_date) from emp; -- 2000-01-01 -- 2. 查询2000-01-01的员工信息 select * from emp where entry_date = '2000-01-01'; -- 3. 合并sql select * from emp where entry_date = (select min(emp.entry_date) from emp); -- B. 查询在 阮小五 入职之后入职的员工信息 -- 1. 查询阮小五的入职日期 select entry_date from emp where name = '阮小五'; -- 2. 查询在 阮小五 入职之后入职的员工信息 select * from emp where entry_date \u003e (select entry_date from emp where name = '阮小五'); -- 列子查询 -- A. 查询 教研部 和 咨询部 的所有员工信息 -- 1.查询 教研部 和 咨询部 的ID select dept.id from dept where name ='教研部' or name = '咨询部'; -- 2.查询对应ID的员工信息 select * from emp where dept_id = 2 or dept_id = 3; select * from emp where dept_id in (2,3); -- 3.合并sql select * from emp where dept_id in (select dept.id from dept where dept.name = '教研部' or dept.name= '咨询部'); -- 行子查询 -- A. 查询与 李忠 的薪资 及 职位都相同的员工信息 -- 1.查询 李忠的薪资以及职位 select emp.salary,emp.job from emp where name = '李忠'; -- 2.查询与李忠的薪资以及职位相同的员工信息 select * from emp where salary = 5000 and job = 5; -- 3.合并sql select * from emp where (salary, job) =(5000 ,5); select * from emp where (salary, job) = (select salary,job from emp where name='李忠'); -- 表子查询 -- A 查询入职时间是 2006-01-01 之后的员工信息 及其 部门信息 -- 1.查询入职时间是 2006-01-01 之后的员工信息 （表1） select * from emp where entry_date \u003e '2006-01-01'; -- 2.查询 表1 与部门 的交集 select * from (select * from emp where entry_date \u003e '2006-01-01') t1 ,dept t2 where t1.dept_id = t2.id; 案例 需求： 查询“教研部”的“男性”员工，且在“2011-05-01”之后入职的员工信息。 查询工资低于公司平均工资的且性别为男的员工信息。 查询工资低于本部门平均工资的员工信息。 查询部门人数超过10人的部门名称。 # - 需求： # 1. 查询“教研部”的“男性”员工，且在“2011-05-01”之后入职的员工信息。 -- 涉及到的表：dept、emp -- a. 查询“教研部”的id select id from dept where name='教研部'; select t1.*,t2.name from emp t1,dept t2 where t1.dept_id = t2.id and t2.name='教研部' and t1.gender=1 and t1.entry_date \u003e '2011-05-01'; # 2. 查询工资低于公司平均工资的且性别为男的员工信息。 -- 涉及表：emp -- a.查出公司平均工资 select avg(emp.salary) from emp; -- 6940.6250 -- b. 查询工资低于公司平均工资 且性别为男的 员工信息 select * from emp where salary \u003c 7000 and gender = 1; -- c.合并 -- 子查询-\u003e标量子查询 select * from emp where salary \u003c (select avg(salary) from emp) and gender = 1; # 3. 查询工资低于本部门平均工资的员工信息。 -- 涉及表：emp -- a. 查询本部门平均工资 -\u003e分组+ 聚合 --\u003e t1表 select dept_id,avg(salary) from emp group by dept_id; -- 4520.0000, 10007.1429, 5242.8571, 100.0000 -- b. 查询工资低于本部门平均工资的员工信息（员工 + t1) select t2.* from (select emp.dept_id,avg(emp.salary) salary from emp group by dept_id) t1,emp t2 where t1.dept_id = t2.dept_id and t2.salary \u003c t1.salary; # 4. 查询部门人数超过10人的部门名称。 -- 涉及表：dept,emp -- a.根据部门统计每个部门有多少人 select dept_id,count(*) from emp group by dept_id; -- b.只查出部门超出10人的数据 select dept_id,count(*) cnt from emp group by dept_id having cnt \u003e 10; -- c.联表查询，查询部门名称 select dept.name from emp,dept where emp.dept_id = dept.id group by dept_id having count(*) \u003e10; 员工列表查询 基本查询 需求：查询 员工信息，并查询出 部门名称。（涉及到的表：emp、dept）\nSQL语句： select e.*, d.name deptName from emp e left join dept d on e.dept_id = d.id; 查询结果的封装，需要保证查询返回的字段名与类中的属性名保持一致。 src/main/java/com/javaweb/entity/Emp.java package com.javaweb.entity; import lombok.Data; import java.time.LocalDate; import java.time.LocalDateTime; @Data public class Emp { private Integer id;//ID,主键 private String username;//用户名 private String password;//密码 private String name;//姓名 private Integer gender;//性别:1-男,2-女 private String phone;//手机 private Integer job;//职位:1-员工,2-班主任,3-学工主管,4-教研主管,5-咨询师 private Integer salary;//薪资 private String image;//头像 private LocalDate entryDate;//入职日期 private Integer deptId;//关联的部门ID private LocalDateTime createTime;//创建时间 private LocalDateTime updateTime;//修改时间 //封装部门名称 private String deptName;//部门名称 } src/main/java/com/javaweb/entity/EmpExpr.java package com.javaweb.entity; import lombok.Data; import java.time.LocalDate; /** * 工作经历 */ @Data public class EmpExpr { private Integer id;//ID private Integer empId;//关联的员工ID private LocalDate begin;//开始时间 private LocalDate end;//结束时间 private String company;//公司名称 private String job;//职位 } 分页查询 分析 实现 src/main/java/com/javaweb/mapper/EmpMapper.java package com.javaweb.mapper; import com.javaweb.entity.Emp; import org.apache.ibatis.annotations.Mapper; import org.apache.ibatis.annotations.Select; import java.util.List; @Mapper public interface EmpMapper { /** * 统计员工总记录数 * @return */ @Select(\"select count(*) from emp\") Long count(); @Select(\"select e.*,d.name deptName from emp e left join dept d on e.dept_id = d.id limit #{start},#{pageSize}\") List\u003cEmp\u003e page(Integer start, Integer pageSize); } src/main/java/com/javaweb/service/EmpService.java package com.javaweb.service; import com.javaweb.entity.PageBean; public interface EmpService { /** * 分页查询 * @param page * @param pageSize * @return */ PageBean page(Integer page, Integer pageSize); } src/main/java/com/javaweb/service/impl/EmpServiceImpl.java package com.javaweb.service.impl; import com.javaweb.entity.Emp; import com.javaweb.entity.PageBean; import com.javaweb.mapper.EmpMapper; import com.javaweb.service.EmpService; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Service; import java.util.List; @Service public class EmpServiceImpl implements EmpService { @Autowired private EmpMapper empMapper; /** * * @param page 页码 1、2、3 * @param pageSize 每页记录数 * @return */ @Override public PageBean page(Integer page, Integer pageSize) { //1. 调用mapper获取总记录数 total //select count(*) from emp Long total = empMapper.count(); //2.调用mapper获取分页列表数据 rows //select * from emp limit ?,? Integer start = (page - 1) * pageSize; List\u003cEmp\u003e empList = empMapper.page(start, pageSize); //3.封装PageBean对象并返回 return new PageBean(total, empList); } } src/main/java/com/javaweb/controller/EmpController.java package com.javaweb.controller; import com.javaweb.entity.PageBean; import com.javaweb.entity.Result; import com.javaweb.service.EmpService; import lombok.extern.slf4j.Slf4j; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.bind.annotation.RestController; @Slf4j// 日志 @RestController// //等价于@Controller + @ResponseBody public class EmpController { @Autowired private EmpService empService; @GetMapping(\"/emps\") public Result page(@RequestParam(defaultValue = \"1\") Integer page, @RequestParam(defaultValue = \"10\") Integer pageSize) { log.info(\"分页查询: {}, {}\", page, pageSize); PageBean pageBean = empService.page(page, pageSize); return Result.success(pageBean); } } 注释\n通过@RequestParam注解的defaultValue属性可以设置参数的默认值\nPageHelper分页插件 PageHeLper是第三方提供的在Mybatis框架中用来实现分页的插件，用来简化分页操作，提高开发效率。 使用步骤： 引入PageHelper的依赖 定义Mapper接口的查询方法（无需考虑分页） 在Service方法中实现分页查询 PageHelper实现机制 注意事项 SQL语句结尾不要加分号（；） PageHelper只会对紧跟在其后的第一条SQL语句进行分页处理 代码优化 pom.xml com.github.pagehelper pagehelper-spring-boot-starter 2.1.1 EmpMapper.java /** * 列表查询 * @return */ @Select(\"select e.*,d.name deptName from emp e left join dept d on e.dept_id = d.id\") List\u003cEmp\u003e list(); EmpServiceImpl.java @Override public PageBean page(Integer page, Integer pageSize) { //1.设置分页参数 PageHelper.startPage(page, pageSize); //2.调用mapper方法 List\u003cEmp\u003e empList = empMapper.list(); Page p = (Page) empList; //强转对象，Page继承了ArrayList //3.封装PageBean对象并返回 return new PageBean(p.getTotal(), p.getResult()); // return new PageBean(p.getTotal(), p); // return new PageBean(p.getTotal(), empList); } 条件分页查询 分析 Controller接收参数 接收条件分页查询的请求参数：\nGET /emps?name=张\u0026gender=1\u0026begin=2007-09-01\u0026end=2022-09-01\u0026page=1\u0026pageSize=10 方式一：再Controller方法中通过多个方法形参，依次接收这几个参数 场景：如果参数个数比较少，建议直接接受即可。如果参数个数较多，不便于维护和管理。\n方式二：在Controller方法中通过实体对象封装多个参数。（实体属性与请求参数名保持一致） 代码实现：\nsrc/main/java/com/javaweb/entity/EmpQueryParam.java package com.javaweb.entity; import lombok.Data; import org.springframework.format.annotation.DateTimeFormat; import java.time.LocalDate; @Data public class EmpQueryParam { private Integer page = 1; //页码 private Integer pageSize = 10; //每页展示记录数 private String name; //姓名 private Integer gender; //性别 @DateTimeFormat(pattern = \"yyyy-MM-dd\") private LocalDate begin; //入职开始时间 @DateTimeFormat(pattern = \"yyyy-MM-dd\") private LocalDate end; //入职结束时间 } EmpController.java @GetMapping(\"/emps\") public Result page(EmpQueryParam param) { log.info(\"分页查询: {}, {}, {}, {}, {}, {}\", param.getName(), param.getGender(), param.getBegin(), param.getEnd(), param.getPage(),param.getPageSize()); PageBean pageBean = empService.page(param.getName(), param.getGender(), param.getBegin(), param.getEnd(), param.getPage(),param.getPageSize()); return Result.success(pageBean); } Service \u0026 Mapper src/main/resources/com/javaweb/mapper/EmpMapper.xml \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" \u003e ",
  "wordCount" : "5048",
  "inLanguage": "zh",
  "datePublished": "2025-11-28T11:41:46+08:00",
  "dateModified": "2025-11-29T01:12:16+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.steamedfish.top/post/java-web/javaweb-14-springboot-tlias3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SteamedFish's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.steamedfish.top/favicon.png"
    }
  }
}
</script>
</head>

<body data-barba="wrapper" class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.steamedfish.top/" accesskey="h" title="SteamedFish&#39;s Blog (Alt + H)">SteamedFish&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                    <ul class="lang-switch"><li>|</li>
                        <li>
                            <a href="https://www.steamedfish.top/en/" title="English"
                                aria-label="English">En</a>
                        </li>
                    </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.steamedfish.top/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://www.steamedfish.top/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main" data-barba="container" data-barba-namespace="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.steamedfish.top/">主页</a>&nbsp;»&nbsp;<a href="https://www.steamedfish.top/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Javaweb——(14)SpringBoot实战·Tlias智能学习辅助系统·员工列表查询
    </h1>
    <div class="post-meta">






<span title='2025-11-28 11:41:46 +0800 +0800'>2025-11-28</span>&nbsp;·&nbsp;<span title='2025-11-29 01:12:16 +0800 +0800'>(最后修改于 2025-11-29)</span>&nbsp;·&nbsp;<span>11 分钟</span>&nbsp;|&nbsp;<span>
    <a href="https://github.com/LucianChao/Hugo_Blog/tree/main/content/post/java-web/javaweb-14-springboot-tlias3/index.md" rel="noopener noreferrer edit" target="_blank">编辑此文章</a>
</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%a4%9a%e8%a1%a8%e5%85%b3%e7%b3%bb" aria-label="多表关系">多表关系</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e5%af%b9%e5%a4%9a%e5%a4%9a%e5%af%b9%e4%b8%80" aria-label="一对多（多对一）">一对多（多对一）</a><ul>
                        
                <li>
                    <a href="#%e5%a4%9a%e8%a1%a8%e9%97%ae%e9%a2%98%e5%88%86%e6%9e%90" aria-label="多表问题分析">多表问题分析</a></li>
                <li>
                    <a href="#%e5%a4%96%e9%94%ae%e7%ba%a6%e6%9d%9f" aria-label="外键约束">外键约束</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%80%e5%af%b9%e4%b8%80" aria-label="一对一">一对一</a></li>
                <li>
                    <a href="#%e5%a4%9a%e5%af%b9%e5%a4%9a" aria-label="多对多">多对多</a></li>
                <li>
                    <a href="#%e6%a1%88%e4%be%8b" aria-label="案例">案例</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a4%9a%e8%a1%a8%e6%9f%a5%e8%af%a2" aria-label="多表查询">多表查询</a><ul>
                        
                <li>
                    <a href="#%e5%a4%9a%e8%a1%a8%e6%9f%a5%e8%af%a2%e7%9a%84%e5%88%86%e7%b1%bb" aria-label="多表查询的分类">多表查询的分类</a></li>
                <li>
                    <a href="#%e5%86%85%e8%bf%9e%e6%8e%a5" aria-label="内连接">内连接</a></li>
                <li>
                    <a href="#%e5%a4%96%e8%bf%9e%e6%8e%a5" aria-label="外连接">外连接</a></li>
                <li>
                    <a href="#%e5%ad%90%e6%9f%a5%e8%af%a2" aria-label="子查询">子查询</a></li>
                <li>
                    <a href="#%e6%a1%88%e4%be%8b-1" aria-label="案例">案例</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%91%98%e5%b7%a5%e5%88%97%e8%a1%a8%e6%9f%a5%e8%af%a2" aria-label="员工列表查询">员工列表查询</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%9f%a5%e8%af%a2" aria-label="基本查询">基本查询</a></li>
                <li>
                    <a href="#%e5%88%86%e9%a1%b5%e6%9f%a5%e8%af%a2" aria-label="分页查询">分页查询</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e6%9e%90" aria-label="分析">分析</a></li>
                <li>
                    <a href="#%e5%ae%9e%e7%8e%b0" aria-label="实现">实现</a></li>
                <li>
                    <a href="#pagehelper%e5%88%86%e9%a1%b5%e6%8f%92%e4%bb%b6" aria-label="PageHelper分页插件">PageHelper分页插件</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9d%a1%e4%bb%b6%e5%88%86%e9%a1%b5%e6%9f%a5%e8%af%a2" aria-label="条件分页查询">条件分页查询</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e6%9e%90-1" aria-label="分析">分析</a></li>
                <li>
                    <a href="#controller%e6%8e%a5%e6%94%b6%e5%8f%82%e6%95%b0" aria-label="Controller接收参数">Controller接收参数</a></li>
                <li>
                    <a href="#service--mapper" aria-label="Service &amp; Mapper">Service &amp; Mapper</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="多表关系">多表关系<a hidden class="anchor" aria-hidden="true" href="#多表关系">#</a></h2>
<p>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构。由于业务之间
相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：</p>
<ul>
<li>一对多(多对一)</li>
<li>一对一</li>
<li>多对多</li>
</ul>
<hr>
<h3 id="一对多多对一">一对多（多对一）<a hidden class="anchor" aria-hidden="true" href="#一对多多对一">#</a></h3>
<ul>
<li>场景：部门与员工的关系（一个部门下有多个员工）。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/1.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/1.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/1.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



在数据库表中 多 的一方，添加字段，来关联 一 的一方的主键</li>
</ul>
<hr>
<h4 id="多表问题分析">多表问题分析<a hidden class="anchor" aria-hidden="true" href="#多表问题分析">#</a></h4>
<p>新建数据库<code>javaweb-db04</code>，运行<a href="/post/java-web/javaweb-14-springboot-tlias3/1.sql">建表语句</a></p>
<ul>
<li>现象：部门数据可以直接删除，然而还有部分员工归属于该部门下，此时就出现了数据的不完整、不一致问题。</li>
<li>原因：目前上述的两张表，在数据库层面，并未建立关联，所以是无法保证数据的一致性和完整性的。</li>
<li>解决方案：<strong>外键</strong>。</li>
</ul>
<hr>
<h4 id="外键约束">外键约束<a hidden class="anchor" aria-hidden="true" href="#外键约束">#</a></h4>
<p>可以在创建表时或表结构创建完成后，为字段添加外键约束。具体语法如下：






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/2.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/2.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/2.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<ul>
<li>物理外键：
<ul>
<li>概念：使用foreignkey定义外键关联另外一张表。</li>
<li>缺点：
<ol>
<li>影响增、删、改的效率（需要检查外键关系）。</li>
<li>仅用于单节点数据库，不适用与分布式、集群场景</li>
<li>容易引发数据库的死锁问题，消耗性能。</li>
</ol>
</li>
</ul>
</li>
<li>逻辑外键
<ul>
<li>概念：在业务层逻辑中，解决外键关联。</li>
<li>通过逻辑外键，就可以很方便的解决上述问题。</li>
</ul>
</li>
<li>外键约束的作用：
<ul>
<li>多表操作中保证数据的<strong>一致性</strong>、<strong>完整性</strong>和<strong>正确性</strong></li>
</ul>
</li>
</ul>
<hr>
<h3 id="一对一">一对一<a hidden class="anchor" aria-hidden="true" href="#一对一">#</a></h3>
<ul>
<li>案例：用户与身份证信息的关系</li>
<li>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中 ，其他字段放在另一张表中，以提升操作效率</li>
<li><strong>在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的（UNIQUE）</strong>






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/3.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/3.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/3.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
</ul>
<hr>
<h3 id="多对多">多对多<a hidden class="anchor" aria-hidden="true" href="#多对多">#</a></h3>
<ul>
<li>案例：学生与课程的关系</li>
<li>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择</li>
<li>实现：<strong>建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</strong>






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/4.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/4.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/4.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
</ul>
<hr>
<h3 id="案例">案例<a hidden class="anchor" aria-hidden="true" href="#案例">#</a></h3>
<ul>
<li>需求：请根据资料中提供的页面原型，设计员工模块涉及到的表结构。</li>
<li>步骤：
<ul>
<li>阅读页面原型及需求文档，分析各个模块涉及到的表结构及表结构之间的关系。</li>
<li>根据页面原型及需求文档，分析各个表结构中具体的字段及约束。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="多表查询">多表查询<a hidden class="anchor" aria-hidden="true" href="#多表查询">#</a></h2>
<ul>
<li>多表查询：指从多张表中查询数据</li>
<li>笛卡尔积：笛卡尔乘积是指在数学中，两个集合（A集合和B集合）的所有组合情况。（<strong>在多表查询时，需要消除无效的笛卡尔积</strong>）






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/5.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/5.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/5.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/6.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/6.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/6.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>示例：
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- 单表查询
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">;</span><span class="w">      </span><span class="c1">-- 32条
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dept</span><span class="p">;</span><span class="w">     </span><span class="c1">-- 7条
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 多表查询
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">dept</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 224条 = 32 * 7
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 消除无效笛卡尔积
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 32条
</span></span></span></code></pre></div></li>
</ul>
<hr>
<h3 id="多表查询的分类">多表查询的分类<a hidden class="anchor" aria-hidden="true" href="#多表查询的分类">#</a></h3>
<p>





    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/7.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/7.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/7.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<ul>
<li>连接查询
<ul>
<li>内连接：相当于查询A、B交集部分数据</li>
<li>外连接
<ul>
<li>左外连接：查询 <strong>左表</strong> 所有数据（包括两张表交集部分）</li>
<li>右外连接：查询 <strong>右表</strong> 所有数据（包括两张表交集部分）</li>
</ul>
</li>
</ul>
</li>
<li>子查询</li>
</ul>
<hr>
<h3 id="内连接">内连接<a hidden class="anchor" aria-hidden="true" href="#内连接">#</a></h3>
<p>内连接查询的是两张表交集部分数据。具体语法为：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- 1.隐式内连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段列表</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="err">连接条件</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2.显式内连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段列表</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="p">[</span><span class="k">inner</span><span class="p">]</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">连接条件</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- 1.给表起别名
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段列表</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="p">[</span><span class="k">as</span><span class="p">]</span><span class="w"> </span><span class="err">别名</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="k">as</span><span class="p">]</span><span class="w"> </span><span class="err">别名</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span></code></pre></div><p><style type="text/css">
     
    .notice {
        --title-color: #fff;
        --title-background-color: #6be;
        --content-color: #444;
        --content-background-color: #e7f2fa;
    }

    .notice.info {
        --title-background-color: #fb7;
        --content-background-color: #fec;
    }

    .notice.tip {
        --title-background-color: #5a5;
        --content-background-color: #efe;
    }

    .notice.warning {
        --title-background-color: #c33;
        --content-background-color: #fee;
    }

     
    

    body.dark .notice {
        --title-color: #fff;
        --title-background-color: #069;
        --content-color: #ddd;
        --content-background-color: #023;
    }

    body.dark .notice.info {
        --title-background-color: #a50;
        --content-background-color: #420;
    }

    body.dark .notice.tip {
        --title-background-color: #363;
        --content-background-color: #121;
    }

    body.dark .notice.warning {
        --title-background-color: #800;
        --content-background-color: #400;
    }

     
    .notice {
        padding: 18px;
        line-height: 24px;
        margin-bottom: 24px;
        border-radius: 4px;
        color: var(--content-color);
        background: var(--content-background-color);
    }

    .notice p:last-child {
        margin-bottom: 0
    }

     
    .notice-title {
        margin: -18px -18px 12px;
        padding: 4px 18px;
        border-radius: 4px 4px 0 0;
        font-weight: 700;
        color: var(--title-color);
        background: var(--title-background-color);
    }

     
    .icon-notice {
        display: inline-flex;
        align-self: center;
        margin-right: 8px;
    }

    .icon-notice img,
    .icon-notice svg {
        height: 1em;
        width: 1em;
        fill: currentColor;
    }

    .icon-notice img,
    .icon-notice.baseline svg {
        top: .125em;
        position: relative;
    }
</style><div class="notice info" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>
        </span>信息</p><p>一旦为表指定了别名，就要通过别名来指定字段名，而不能再使用表名了。</p></div>
示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- =================内连接====================
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A. 查询所有员工的ID、姓名，及所属部门的部门名称（隐式、显式内连接实现）
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及到的表：emp、dept
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 隐式内连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 显式内连接 [inner] join ... on ...
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w">  </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- B. 查询性别为男，且工资高于8000 的员工的ID，姓名，及所属的部门名称
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及表：emp、dept
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 隐式内连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">8000</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 显式内连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">8000</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><hr>
<h3 id="外连接">外连接<a hidden class="anchor" aria-hidden="true" href="#外连接">#</a></h3>
<p>外连接分为左外连接和右外连接。具体语法为：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- 1.左外连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段列表</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="p">[</span><span class="k">outer</span><span class="p">]</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">连接条件</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2.右外连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段列表</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="p">[</span><span class="k">outer</span><span class="p">]</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">连接条件</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span></code></pre></div><p><div class="notice tip" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
        </span>提示</p><p>对于外连接，常用的是左外连接，因为右外连接的SQL也可以改造成为左外连接（两张表调换个顺序）。</p></div>
示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- =================外连接====================
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A. 查询员工表 所有员工的ID、姓名，及所属部门的部门名称（左外连接）
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- B. 查询部门表 所有部门的ID、名称，及部门下所有员工的ID、姓名（右外连接）
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 改成左外连接
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- C. 查询工资 高于8000 的所有员工的姓名，和对应的部门名称（左外连接）
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">8000</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><hr>
<h3 id="子查询">子查询<a hidden class="anchor" aria-hidden="true" href="#子查询">#</a></h3>
<ul>
<li>介绍：SQL语句中嵌套select语句，称为嵌套查询，又称子查询。</li>
<li>形式:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="p">...);</span><span class="w">
</span></span></span></code></pre></div></li>
<li>说明：子查询外部的语句可以是insert / update / delete / select的任何一个，最常见的是select。</li>
<li>分类：
<ol>
<li>标量子查询：子查询返回的结果为单个值</li>
<li>列子查询：子查询返回的结果为一列</li>
<li>行子查询：子查询返回的结果为一行</li>
<li>表子查询：子查询返回的结果为多行多列</li>
</ol>
</li>
</ul>
<p><div class="notice tip" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
        </span>提示</p><p>子查询的要点是，先对需求做拆分，明确具体的步骤，然后再逐步编写SQL语句。</p></div>
示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- =================子查询====================
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 标量子查询
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A. 查询 最早入职 的员工信息
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 1. 查询最早入职的日期（最小的日期）
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">entry_date</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 2000-01-01
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2. 查询2000-01-01的员工信息
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 3. 合并sql
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">entry_date</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- B. 查询在 阮小五 入职之后入职的员工信息
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 1. 查询阮小五的入职日期
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;阮小五&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2. 查询在 阮小五 入职之后入职的员工信息
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;阮小五&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 列子查询
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A. 查询 教研部 和 咨询部 的所有员工信息
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 1.查询 教研部 和 咨询部 的ID
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;教研部&#39;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;咨询部&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2.查询对应ID的员工信息
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 3.合并sql
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;教研部&#39;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;咨询部&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 行子查询
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A. 查询与 李忠 的薪资 及 职位都相同的员工信息
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 1.查询 李忠的薪资以及职位
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">job</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;李忠&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2.查询与李忠的薪资以及职位相同的员工信息
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 3.合并sql
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">job</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="mi">5000</span><span class="w"> </span><span class="p">,</span><span class="mi">5</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">job</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="p">,</span><span class="n">job</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;李忠&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 表子查询
</span></span></span><span class="line"><span class="cl"><span class="c1">-- A 查询入职时间是 2006-01-01 之后的员工信息 及其 部门信息
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 1.查询入职时间是 2006-01-01 之后的员工信息 （表1）
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2006-01-01&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 2.查询 表1 与部门 的交集
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">entry_date</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2006-01-01&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><hr>
<h3 id="案例-1">案例<a hidden class="anchor" aria-hidden="true" href="#案例-1">#</a></h3>
<ul>
<li>需求：
<ol>
<li>查询“教研部”的“男性”员工，且在“2011-05-01”之后入职的员工信息。</li>
<li>查询工资低于公司平均工资的且性别为男的员工信息。</li>
<li>查询工资低于本部门平均工资的员工信息。</li>
<li>查询部门人数超过10人的部门名称。</li>
</ol>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">需求：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">#</span><span class="w">   </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">查询“教研部”的“男性”员工，且在“</span><span class="mi">2011</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="err">”之后入职的员工信息。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及到的表：dept、emp
</span></span></span><span class="line"><span class="cl"><span class="c1">-- a. 查询“教研部”的id
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;教研部&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">t2</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;教研部&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">gender</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">entry_date</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2011-05-01&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">#</span><span class="w">   </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">查询工资低于公司平均工资的且性别为男的员工信息。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及表：emp
</span></span></span><span class="line"><span class="cl"><span class="c1">-- a.查出公司平均工资
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 6940.6250
</span></span></span><span class="line"><span class="cl"><span class="c1">-- b. 查询工资低于公司平均工资 且性别为男的 员工信息
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">7000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- c.合并 -- 子查询-&gt;标量子查询
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">#</span><span class="w">   </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">查询工资低于本部门平均工资的员工信息。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及表：emp
</span></span></span><span class="line"><span class="cl"><span class="c1">-- a. 查询本部门平均工资     -&gt;分组+ 聚合 --&gt; t1表
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept_id</span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_id</span><span class="p">;</span><span class="w">   </span><span class="c1">-- 4520.0000, 10007.1429, 5242.8571, 100.0000
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- b. 查询工资低于本部门平均工资的员工信息（员工 + t1)
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_id</span><span class="p">)</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="n">emp</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">salary</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">#</span><span class="w">   </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="err">查询部门人数超过</span><span class="mi">10</span><span class="err">人的部门名称。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- 涉及表：dept,emp
</span></span></span><span class="line"><span class="cl"><span class="c1">-- a.根据部门统计每个部门有多少人
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept_id</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- b.只查出部门超出10人的数据
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept_id</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">-- c.联表查询，查询部门名称
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">dept</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><hr>
<h2 id="员工列表查询">员工列表查询<a hidden class="anchor" aria-hidden="true" href="#员工列表查询">#</a></h2>
<p>





    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/8.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/8.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/8.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<hr>
<h3 id="基本查询">基本查询<a hidden class="anchor" aria-hidden="true" href="#基本查询">#</a></h3>
<p>需求：查询 <strong>员工信息</strong>，并查询出 <strong>部门名称</strong>。（涉及到的表：emp、dept）</p>
<ul>
<li>SQL语句：
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="n">deptName</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">dept</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">dept_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<p>查询结果的封装，需要保证查询返回的字段名与类中的属性名保持一致。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/9.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/9.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/9.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<ul>
<li><code>src/main/java/com/javaweb/entity/Emp.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.entity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Emp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="c1">//ID,主键</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">;</span><span class="c1">//用户名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="c1">//密码</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="c1">//姓名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="c1">//性别:1-男,2-女</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">phone</span><span class="p">;</span><span class="c1">//手机</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">job</span><span class="p">;</span><span class="c1">//职位:1-员工,2-班主任,3-学工主管,4-教研主管,5-咨询师</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">salary</span><span class="p">;</span><span class="c1">//薪资</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">image</span><span class="p">;</span><span class="c1">//头像</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">entryDate</span><span class="p">;</span><span class="c1">//入职日期</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">deptId</span><span class="p">;</span><span class="c1">//关联的部门ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createTime</span><span class="p">;</span><span class="c1">//创建时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updateTime</span><span class="p">;</span><span class="c1">//修改时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//封装部门名称</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">deptName</span><span class="p">;</span><span class="c1">//部门名称</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>src/main/java/com/javaweb/entity/EmpExpr.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.entity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 工作经历
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EmpExpr</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="c1">//ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">empId</span><span class="p">;</span><span class="c1">//关联的员工ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">begin</span><span class="p">;</span><span class="c1">//开始时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">end</span><span class="p">;</span><span class="c1">//结束时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">company</span><span class="p">;</span><span class="c1">//公司名称</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">job</span><span class="p">;</span><span class="c1">//职位</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<hr>
<h3 id="分页查询">分页查询<a hidden class="anchor" aria-hidden="true" href="#分页查询">#</a></h3>
<h4 id="分析">分析<a hidden class="anchor" aria-hidden="true" href="#分析">#</a></h4>
<p>





    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/10.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/10.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/10.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>









    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/11.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/11.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/11.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<hr>
<h4 id="实现">实现<a hidden class="anchor" aria-hidden="true" href="#实现">#</a></h4>
<ul>
<li><code>src/main/java/com/javaweb/mapper/EmpMapper.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.mapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.Emp</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Select</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">EmpMapper</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 统计员工总记录数
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Select</span><span class="p">(</span><span class="s">&#34;select count(*) from emp&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Long</span><span class="w"> </span><span class="nf">count</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Select</span><span class="p">(</span><span class="s">&#34;select e.*,d.name deptName from emp e left join dept d on e.dept_id = d.id limit #{start},#{pageSize}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>src/main/java/com/javaweb/service/EmpService.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.service</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.PageBean</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">EmpService</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 分页查询
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param page
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param pageSize
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PageBean</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>src/main/java/com/javaweb/service/impl/EmpServiceImpl.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.service.impl</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.Emp</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.PageBean</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.mapper.EmpMapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.service.EmpService</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EmpServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">EmpService</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Autowired</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">empMapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param page     页码 1、2、3
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param pageSize  每页记录数
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PageBean</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1. 调用mapper获取总记录数     total</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//select count(*) from emp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Long</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empMapper</span><span class="p">.</span><span class="na">count</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2.调用mapper获取分页列表数据    rows</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//select * from emp limit ?,?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Integer</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">page</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pageSize</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">empList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empMapper</span><span class="p">.</span><span class="na">page</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3.封装PageBean对象并返回</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageBean</span><span class="p">(</span><span class="n">total</span><span class="p">,</span><span class="w"> </span><span class="n">empList</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>src/main/java/com/javaweb/controller/EmpController.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.controller</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.PageBean</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.Result</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.service.EmpService</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.extern.slf4j.Slf4j</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Slf4j</span><span class="c1">//  日志</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@RestController</span><span class="c1">//  //等价于@Controller + @ResponseBody</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EmpController</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Autowired</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EmpService</span><span class="w"> </span><span class="n">empService</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&#34;/emps&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;1&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                       </span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;10&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&#34;分页查询: {}, {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">PageBean</span><span class="w"> </span><span class="n">pageBean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empService</span><span class="p">.</span><span class="na">page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">pageBean</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<div class="notice note" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>
        </span>注释</p><p>通过@RequestParam注解的defaultValue属性可以设置参数的默认值</p></div>
<hr>
<h4 id="pagehelper分页插件">PageHelper分页插件<a hidden class="anchor" aria-hidden="true" href="#pagehelper分页插件">#</a></h4>
<ul>
<li>PageHeLper是第三方提供的在Mybatis框架中用来实现分页的插件，用来<strong>简化分页操作</strong>，<strong>提高开发效率</strong>。






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/12.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/12.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/12.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>使用步骤：
<ol>
<li>引入PageHelper的依赖






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/13.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/13.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/13.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>定义Mapper接口的查询方法（无需考虑分页）






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/14.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/14.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/14.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>在Service方法中实现分页查询






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/15.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/15.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/15.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
</ol>
</li>
<li>PageHelper实现机制






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/16.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/16.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/16.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</li>
<li>注意事项
<ol>
<li>SQL语句结尾不要加分号（；）</li>
<li>PageHelper只会对紧跟在其后的第一条SQL语句进行分页处理</li>
</ol>
</li>
<li>代码优化
<ul>
<li><code>pom.xml</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--  分页插件 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.github.pagehelper<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>pagehelper-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>2.1.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></div></li>
<li><code>EmpMapper.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 列表查询
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @return
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Select</span><span class="p">(</span><span class="s">&#34;select e.*,d.name deptName from emp e left join dept d on e.dept_id = d.id&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">list</span><span class="p">();</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>EmpServiceImpl.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">PageBean</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//1.设置分页参数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PageHelper</span><span class="p">.</span><span class="na">startPage</span><span class="p">(</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">pageSize</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//2.调用mapper方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">empList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empMapper</span><span class="p">.</span><span class="na">list</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Page</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Page</span><span class="p">)</span><span class="w"> </span><span class="n">empList</span><span class="p">;</span><span class="w">    </span><span class="c1">//强转对象，Page继承了ArrayList</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//3.封装PageBean对象并返回</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageBean</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="na">getTotal</span><span class="p">(),</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">getResult</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// return new PageBean(p.getTotal(), p);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// return new PageBean(p.getTotal(), empList);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
</li>
</ul>
<hr>
<h3 id="条件分页查询">条件分页查询<a hidden class="anchor" aria-hidden="true" href="#条件分页查询">#</a></h3>
<h4 id="分析-1">分析<a hidden class="anchor" aria-hidden="true" href="#分析-1">#</a></h4>
<p>





    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/17.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/17.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/17.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
<h4 id="controller接收参数">Controller接收参数<a hidden class="anchor" aria-hidden="true" href="#controller接收参数">#</a></h4>
<ul>
<li>
<p>接收条件分页查询的请求参数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">GET</span>  <span class="err">/emps?name=张&amp;gender=</span><span class="mi">1</span><span class="err">&amp;begin=</span><span class="mi">2007-09-01</span><span class="err">&amp;end=</span><span class="mi">2022-09-01</span><span class="err">&amp;page=</span><span class="mi">1</span><span class="err">&amp;pageSize=</span><span class="mi">10</span>
</span></span></code></pre></div></li>
<li>
<p>方式一：再Controller方法中通过多个方法形参，依次接收这几个参数






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/18.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/18.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/18.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>



场景：如果参数个数比较少，建议直接接受即可。如果参数个数较多，不便于维护和管理。</p>
</li>
<li>
<p>方式二：在Controller方法中通过实体对象封装多个参数。（实体属性与请求参数名保持一致）






    


       
    



<div class="post-img-view">
  <a
    data-fancybox="post-post/java-web/javaweb-14-springboot-tlias3/index.md"
    href="/post/java-web/javaweb-14-springboot-tlias3/19.webp"
    data-caption=""
    data-barba-prevent="all"
  >
    <img
      src="/post/java-web/javaweb-14-springboot-tlias3/19.webp"
      srcset="/post/java-web/javaweb-14-springboot-tlias3/19.webp 2x"
      alt=""
      loading="lazy"
      style="max-width: 100%; height: auto;"
    />
  </a>
    
  
</div>


</p>
</li>
<li>
<p>代码实现：</p>
<ul>
<li><code>src/main/java/com/javaweb/entity/EmpQueryParam.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.entity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.format.annotation.DateTimeFormat</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDate</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EmpQueryParam</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">       </span><span class="c1">//页码</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">pageSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">10</span><span class="p">;</span><span class="w">  </span><span class="c1">//每页展示记录数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">            </span><span class="c1">//姓名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w">         </span><span class="c1">//性别</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;yyyy-MM-dd&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">begin</span><span class="p">;</span><span class="w">        </span><span class="c1">//入职开始时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@DateTimeFormat</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;yyyy-MM-dd&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">end</span><span class="p">;</span><span class="w">          </span><span class="c1">//入职结束时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>EmpController.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&#34;/emps&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">Result</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">EmpQueryParam</span><span class="w"> </span><span class="n">param</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">log</span><span class="p">.</span><span class="na">info</span><span class="p">(</span><span class="s">&#34;分页查询: {}, {}, {}, {}, {}, {}&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getGender</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getBegin</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getEnd</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getPage</span><span class="p">(),</span><span class="n">param</span><span class="p">.</span><span class="na">getPageSize</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PageBean</span><span class="w"> </span><span class="n">pageBean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empService</span><span class="p">.</span><span class="na">page</span><span class="p">(</span><span class="n">param</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getGender</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getBegin</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getEnd</span><span class="p">(),</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="na">getPage</span><span class="p">(),</span><span class="n">param</span><span class="p">.</span><span class="na">getPageSize</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="na">success</span><span class="p">(</span><span class="n">pageBean</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
</li>
</ul>
<hr>
<h4 id="service--mapper">Service &amp; Mapper<a hidden class="anchor" aria-hidden="true" href="#service--mapper">#</a></h4>
<ul>
<li><code>src/main/resources/com/javaweb/mapper/EmpMapper.xml</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE mapper PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34; &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34; &gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.javaweb.mapper.EmpMapper&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;list&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.javaweb.entity.Emp&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        select e.*, d.name deptName
</span></span><span class="line"><span class="cl">        from emp e
</span></span><span class="line"><span class="cl">        left join dept d on e.dept_id = d.id
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;where&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;name != null and name != &#39;&#39;&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                e.name like concat(&#39;%&#39;,#{name},&#39;%&#39;)
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;gender != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                and e.gender = #{gender}
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;begin != null and end != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                and e.entry_date between #{begin} and #{end}
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/where&gt;</span>
</span></span><span class="line"><span class="cl">        order by e.update_time desc
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/select&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mapper&gt;</span>
</span></span></code></pre></div><div class="notice note" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>
        </span>注释</p><p><code>&lt;where&gt;</code>标签：</p>
<ol>
<li>可以自动根据条件判断是否加 where 关键字</li>
<li>可以去除掉第一个条件前面多余的 and 或 or</li>
</ol></div></li>
<li><code>EmpService.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">EmpService</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 分页查询
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param param
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PageBean</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">EmpQueryParam</span><span class="w"> </span><span class="n">param</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>EmpServiceImpl.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EmpServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">EmpService</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Autowired</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EmpMapper</span><span class="w"> </span><span class="n">empMapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param page     页码 1、2、3
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param pageSize 每页记录数
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PageBean</span><span class="w"> </span><span class="nf">page</span><span class="p">(</span><span class="n">EmpQueryParam</span><span class="w"> </span><span class="n">param</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.设置分页参数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">PageHelper</span><span class="p">.</span><span class="na">startPage</span><span class="p">(</span><span class="n">param</span><span class="p">.</span><span class="na">getPage</span><span class="p">(),</span><span class="n">param</span><span class="p">.</span><span class="na">getPageSize</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2.调用mapper方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="n">empList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empMapper</span><span class="p">.</span><span class="na">list</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Page</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Page</span><span class="p">)</span><span class="w"> </span><span class="n">empList</span><span class="p">;</span><span class="w">    </span><span class="c1">//强转对象，Page继承了ArrayList</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3.封装PageBean对象并返回</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PageBean</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="na">getTotal</span><span class="p">(),</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">getResult</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li><code>EmpMapper.java</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.javaweb.mapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.Emp</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.javaweb.entity.EmpQueryParam</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">EmpMapper</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 列表查询
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//    @Select(&#34;select e.*,d.name deptName from emp e left join dept d on e.dept_id = d.id&#34;)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//基于XML开发-- 动态SQL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Emp</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">EmpQueryParam</span><span class="w"> </span><span class="n">param</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<hr>
<p>请使用Apifox进行接口测试以及前后端联调</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.steamedfish.top/tags/mysql/">Mysql</a></li>
      <li><a href="https://www.steamedfish.top/tags/%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/">多表查询</a></li>
      <li><a href="https://www.steamedfish.top/tags/%E5%A4%9A%E8%A1%A8%E8%AE%BE%E8%AE%A1/">多表设计</a></li>
      <li><a href="https://www.steamedfish.top/tags/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/">实战项目</a></li>
      <li><a href="https://www.steamedfish.top/tags/%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB/">多表关系</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://www.steamedfish.top/">©2025 SteamedFish&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script src="https://unpkg.com/@barba/core"></script>


<script>
window.PaperMod = window.PaperMod || {};
PaperMod.state = { once: false };

PaperMod.initOnce = function () {
  
  if (PaperMod.state.once) return;
  PaperMod.state.once = true;
  console.log("PaperMod initOnce");

  
  if (PaperMod.initAPlayer && !window.__aplayer_inited__) {
    PaperMod.initAPlayer();
  }
};

PaperMod.initPage = function (container = document) {
  console.log("PaperMod initPage");

  PaperMod.initFancybox && PaperMod.initFancybox(container);
  PaperMod.initCodeCopyButtons && PaperMod.initCodeCopyButtons(container);
};


barba.init({
  transitions: [
    {
      name: "default",
      leave() {
        return Promise.resolve();
      },
      enter(data) {
        
        PaperMod.initOnce();
        PaperMod.initPage(data.next.container);
      },
    },
  ],
});



document.addEventListener("DOMContentLoaded", () => {
  PaperMod.initOnce();
  PaperMod.initPage(document);
});

</script>







<link
  href="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.css"
  rel="stylesheet"
/>
<script src="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/meting/2.0.2/Meting.min.js"></script>

<meting-js
  server="netease"
  fixed="true"
  lrc-type="1"
  type="playlist"
  id="2245453903"
  api="https://api.qijieya.cn/meting/?type=:type&id=:id"
  >
  
  
         
  
  
  
</meting-js>
<script>
  if (window.Barba) {
    Barba.hooks.afterEnter(function () {
      const metingPlayer = document.querySelector('meting-js');
      if (metingPlayer) {
        metingPlayer.load();  
      }
    });
  }
  
  
  
  
  
  
  

  
  
  
  
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  
  

  
  
  
  
  
  
  
  
  
  
  

  
  
  

  
  
  
</script>




<script>
  window.PaperMod = window.PaperMod || {};

  PaperMod.initCodeCopyButtons = function (root = document) {
    root.querySelectorAll("pre > code").forEach((codeblock) => {
      const container = codeblock.parentNode.parentNode;

      
      if (container.querySelector(".copy-code")) return;

      const copybutton = document.createElement("button");
      copybutton.classList.add("copy-code");
      copybutton.innerHTML = '复制';

      function copyingDone() {
        copybutton.innerHTML = '已复制！';
        setTimeout(() => {
          copybutton.innerHTML = '复制';
        }, 2000);
      }

      copybutton.addEventListener("click", (cb) => {
        if ("clipboard" in navigator) {
          navigator.clipboard.writeText(codeblock.textContent);
          copyingDone();
          return;
        }

        const range = document.createRange();
        range.selectNodeContents(codeblock);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        try {
          document.execCommand("copy");
          copyingDone();
        } catch (e) {}
        selection.removeRange(range);
      });
      container.appendChild(copybutton);
    });
  };
</script>


<link rel="stylesheet" href="/lib/fancybox/fancybox.css" />
<script src="/lib/fancybox/fancybox.umd.js"></script>
<script>
  function initFancybox() {
    Fancybox.unbind("[data-fancybox]");

    Fancybox.bind("[data-fancybox]", {
      animated: true,
      showClass: "fancybox-fadeIn",
      hideClass: "fancybox-fadeOut",
      dragToClose: true,
    });
  }

  
  if (document.readyState !== "loading") {
    initFancybox();
  } else {
    document.addEventListener("DOMContentLoaded", initFancybox);
  }
  
  document.addEventListener("barba:afterEnter", initFancybox);
</script>







<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
